var vm=new Vue({el:"#WarehouseController",data:{container:{requestView:!0,approvalView:!1,showApproved:!1,showWarehouse:!1,showShipping:!1,showLog:!1,showPickup:!1},request:{member_id:"",branch_id:"",branch_id_to:"",shipping_company_id:"",remarks:"",item_id:"",qty:"",client_po:"",for_pickup:"1",is_reserve:0},items:[],orders:[],orders_log:[],orders_pickup:[],orderDetails:[],scheduleDates:[],rackings:[],bundles:[],success:!1,current_order_obj:[],current_order_det:[],current_order:0,current_status:0,current_isScheduled:0,current_stock_out:0,current_canBeResched:1,details_ready:!1,dates_ready:!1,insufficient:!1,print_data:[],invoice:0,dr:0,pr:0,ajaxRequest:!1,schedule_date:"",re_schedule_date:"",is_member:"",user_member_id:"",is_priority:0,truck_id:"",helper_id:[],driver_id:0,trucks:[],helpers:[],drivers:[],re_truck_id:"",re_driver_id:"",re_helper_id:"",countdel:0,countpickup:0,log_from:"",log_to:"",new_item_order:"",new_qty_order:"",order_updating:0,branch_id_filter:0,for_pickup_filter:0,assemble_filter:0,invoice_prefix:"",dr_prefix:"",pr_prefix:"",del_filter_type:"",pickup_filter_type:"",my_auth:0,order_limit:15,cart_item_ctr:0,current_user_id:0,serials:[],pending_counts:{for_approval:0,shipping:0,warehouse:0},filters:{forApproval:function(a){var b=1==a.status&&0==a.is_reserve;return 0!=this.branch_id_filter.value||this.for_pickup_filter.value||this.assemble_filter.value?(this.branch_id_filter.value&&(b=b&&a.branch_id==this.branch_id_filter.value),1==this.for_pickup_filter.value?b=b&&"For Pickup"==a.for_pickup:2==this.for_pickup_filter.value&&(b=b&&""==a.for_pickup),1==this.assemble_filter.value?b=b&&1==a.has_assemble_item:2==this.assemble_filter.value&&(b=b&&0==a.has_assemble_item),b):1==a.status&&0==a.is_reserve},forApprovalReserve:function(a){var b=1==a.status&&1==a.is_reserve;return b},approved:function(a){var b=3==a.status;return 0!=this.branch_id_filter.value||this.for_pickup_filter.value||this.assemble_filter.value?(this.branch_id_filter.value&&(b=b&&a.branch_id==this.branch_id_filter.value),1==this.for_pickup_filter.value?b=b&&"For Pickup"==a.for_pickup:2==this.for_pickup_filter.value&&(b=b&&""==a.for_pickup),1==this.assemble_filter.value?b=b&&1==a.has_assemble_item:2==this.assemble_filter.value&&(b=b&&0==a.has_assemble_item),b):3==a.status},shipping:function(a){return 2==a.status},forApprovalMember:function(a){return 1==a.status&&a.member_id==this.user_member_id.value},approvedMember:function(a){return 3==a.status&&a.member_id==this.user_member_id.value},shippingMember:function(a){return 2==a.status&&a.member_id==this.user_member_id.value}}},ready:function(){this.is_member=$("#is_member").val(),this.user_member_id=$("#user_member_id").val(),this.user_fullname=$("#user_fullname").val(),this.invoice_prefix=$("#INVOICE_PREFIX").val(),this.dr_prefix=$("#DR_PREFIX").val(),this.pr_prefix=$("#PR_PREFIX").val(),this.my_auth=$("#APPROVAL_AUTH").val(),this.current_user_id=$("#current_user_id").val();var a=$("#member_id"),b=$("#op_member_id"),c=$("#branch_id"),d=$("#branch_id_to"),e=$("#shipping_company_id"),f=$("#helper_id");c.select2({placeholder:"From",allowClear:!0}),d.select2({placeholder:"To",allowClear:!0}),e.select2({placeholder:"Shipping Company",allowClear:!0}),f.select2({placeholder:"Select Helper",allowClear:!0});var g=$("#MEMBER_LABEL").val();a.select2({placeholder:"Search "+g,allowClear:!0,minimumInputLength:2,ajax:{url:"../ajax/ajax_json.php",dataType:"json",type:"POST",quietMillis:50,data:function(a){return{q:a,functionName:"members",my_client:1}},results:function(a){return{results:$.map(a,function(a){return{text:a.lastname+", "+a.sales_type_name,slug:a.lastname+", "+a.firstname+" "+a.middlename,id:a.id}})}}}}),b.select2({placeholder:"Search "+g,allowClear:!0,minimumInputLength:2,ajax:{url:"../ajax/ajax_json.php",dataType:"json",type:"POST",quietMillis:50,data:function(a){return{q:a,functionName:"members",my_client:1}},results:function(a){return{results:$.map(a,function(a){return{text:a.lastname+", "+a.sales_type_name,slug:a.lastname+", "+a.firstname+" "+a.middlename,id:a.id}})}}}}),1==this.is_member&&(this.request.member_id=this.user_member_id,a.select2("disable",!0),a.select2("data",{id:this.user_member_id,text:this.user_fullname})),$("#schedule_date").datepicker({autoclose:!0}).on("changeDate",function(a){$("#schedule_date").datepicker("hide")}),$("#re_schedule_date").datepicker({autoclose:!0}).on("changeDate",function(a){$("#re_schedule_date").datepicker("hide")});var h=this;h.getLayout(),h.getInvoiceDrPr(),h.unsavedRequest(),h.getTrucks(),h.orderCount()},computed:{validation:function(){return{branch_id:!!this.request.branch_id,item_id:!!this.request.item_id,qty:!!this.request.qty||isNaN(this.request.qty)}},validateInvoice:function(a){return 1==a.stock_out&&0!=a.payment_id&&0!=a.invoice},validateDr:function(a){return 1==a.stock_out&&0!=a.payment_id&&0!=a.dr},isValid:function(){var a=this.validation;return Object.keys(a).every(function(b){return a[b]})},isSuccess:function(){return this.success},cur_terminal_id:function(){return localStorage.terminal_id},totalAmount:function(){var a=0;for(var b in this.items)a=parseFloat(a)+this.items[b].qty*this.items[b].price;return number_format(a,2)},pending_for_approval:function(){return 0==this.is_member?this.orders.filter(this.filters.forApproval):this.orders.filter(this.filters.forApprovalMember)},pending_for_approval_reserved:function(){return 0==this.is_member?this.orders.filter(this.filters.forApprovalReserve):this.orders.filter(this.filters.forApprovalMember)},pending_approved:function(){return 0==this.is_member?this.orders.filter(this.filters.approved):this.orders.filter(this.filters.approvedMember)},pending_shipping:function(){return 0==this.is_member?this.orders.filter(this.filters.shipping):this.orders.filter(this.filters.shippingMember)},current_item_status:function(){return this.current_status},current_item_isScheduled:function(){return this.current_isScheduled},current_item_stock_out:function(){return this.current_stock_out},current_item_canBeResched:function(){return this.current_canBeResched},current_item_truck_id:function(){return this.current_truck_id},current_is_member:function(){return this.is_member},current_member_id:function(){return this.user_member_id},computed_order:function(){return this.current_order_det},same_branch:function(){return this.current_order_det.branch_id==localStorage.branch_id},current_updating:function(){return this.order_updating},current_auth:function(){var a=this.my_auth,b=this.current_order_det.branch_id;if(a.indexOf(",")>0){if(a=a.split(","),a.length>0)for(var c in a)if(a[c]==b)return!0}else if(a==b)return!0;return!1}},methods:{orderCount:function(){var a=this;$.ajax({url:"../ajax/ajax_query2.php",type:"POST",dataType:"json",data:{functionName:"getOrderCount"},success:function(b){if(console.log(b),b.length)for(var c in b)1==b[c].status?a.pending_counts.for_approval=b[c].cnt:2==b[c].status?a.pending_counts.shipping=b[c].cnt:3==b[c].status&&(a.pending_counts.warehouse=b[c].cnt)},error:function(){}})},backload:function(a){$("#back-load-modal").modal("show"),$.ajax({url:"../ajax/ajax_query.php",type:"POST",data:{functionName:"showBackloadWh"},success:function(a){},error:function(){}})},toggleCheckItem:function(a){a.is_check=a.is_check?0:1,$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"toggleCheckItem",order_det_id:a.id},success:function(a){},error:function(){alert("Error Occur")}})},addOrderDetails:function(){var a=this.current_order_det,b=this,c=b.new_item_order,d=b.new_qty_order;$.ajax({url:"../ajax/ajax_query.php",type:"POST",data:{functionName:"itemItemOrders",item_id:c,qty:d,cur_order:JSON.stringify(a)},success:function(c){tempToast("info","<p>"+c+"</p>","<h4>Information!</h4>"),b.getDetailscomp(a.id,a.status),b.fetchedOrder(a.status)},error:function(){}})},deleteOrderDetails:function(a){var b=a.id,c=this.current_order_det,d=this;alertify.confirm("Are you sure you want to delete this record?",function(a){a&&$.ajax({url:"../ajax/ajax_query.php",type:"POST",data:{functionName:"deleteItemOrders",id:b,cur_order:JSON.stringify(c)},success:function(a){tempToast("info","<p>"+a+"</p>","<h4>Information!</h4>"),d.getDetailscomp(c.id,c.status),d.fetchedOrder(c.status)},error:function(){}})})},updateDetails:function(){if(1==this.order_updating){this.order_updating=0;var a=this.orderDetails,b=this.current_order_det,c=this;$.ajax({url:"../ajax/ajax_query.php",type:"POST",data:{functionName:"updateItemOrders",cur_order:JSON.stringify(b),od:JSON.stringify(a)},success:function(a){tempToast("info","<p>"+a+"</p>","<h4>Information!</h4>"),c.getDetailscomp(b.id,b.status),c.fetchedOrder(b.status)},error:function(){}})}else this.order_updating=1},printDelLog:function(){if(this.orders_log.length>0){var a="",b="",c=this.log_from,d=this.log_to,e="";e=c.trim()==d.trim()?c:c+" - "+d,b+="<div class='container-fluid'>",b+="<h1 class='text-center'><img width='35' height='35' src='../css/img/logo.png' /> "+localStorage.company_name+"</h1>",b+="<h3 class='text-center'>Deliveries Print Out</h3>",b+="<p class='text-left'>Schedule: "+e+"</p>",a+="<table class='table table-bordered'>",a+="<thead>",a+="<tr>",a+="<th>ID</th><th>Client</th><th>Remarks</th><th>Truck</th>",a+="</tr>",a+="</thead>",a+="<tbody>";for(var f in this.orders_log)a+="<tr>",a+="<td>"+this.orders_log[f].id+"</td>",a+="<td>"+this.orders_log[f].fullname+"<small style='display:block;' class='text-danger span-block'>"+this.orders_log[f].personal_address+"</small></td>",a+="<td>"+this.orders_log[f].remarks+"</td>",a+="<td>"+this.orders_log[f].truck+"</td>",a+="</tr>";a+="</tbody>",a+="</table>",a+="</div>",this.popUpPrintWithStyle(b+a)}},printWarehouse:function(){window.open("../ajax/ajax_warehouse.php?functionName=printWarehousePending","_blank")},filterDelLog:function(){this.fetchedOrderLog()},scheduleOrder:function(){var a=$("#btnScheduleOrder"),b=a.html(),c=this;console.log(c.current_order_det.shipping_name),a.attr("disabled",!0),a.html("Loading..."),c.schedule_date&&(c.truck_id&&c.helper_id&&c.driver_id||c.current_order_det.shipping_name||""!=c.current_order_det.for_pickup)?$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"scheduleOrderWh",order_id:c.current_order,schedule_date:c.schedule_date,truck_id:c.truck_id,helpers_id:JSON.stringify(c.helper_id),driver_id:c.driver_id},success:function(d){tempToast("info","<p>"+d+"</p>","<h4>Information!</h4>"),a.attr("disabled",!1),a.html(b),$("#myModal").modal("hide"),c.fetchedOrder(c.current_order_det.status),c.orderCount()},error:function(){tempToast("error","<p>Error occur. Please try again.</p>","<h4>Error!</h4>"),$("#myModal").modal("hide"),a.attr("disabled",!1),a.html(b)}}):alertify.alert("Please complete the form.",function(){a.attr("disabled",!1),a.html(b)})},reScheduleOrder:function(){var a=$("#btnReScheduleOrder"),b=a.html();a.attr("disabled",!0),a.html("Loading...");var c=this;c.re_schedule_date?$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"reScheduleOrderWh",order_id:c.current_order,schedule_date:c.re_schedule_date,re_truck_id:c.re_truck_id,re_driver_id:c.re_driver_id,re_helper_id:JSON.stringify(c.re_helper_id)},success:function(d){tempToast("info","<p>"+d+"</p>","<h4>Information!</h4>"),a.attr("disabled",!1),a.html(b),$("#myModalDates").modal("hide"),c.fetchedOrderLog()},error:function(){alertify.error("<h4>Error Occur. Please Try again.</h4>"),$("#myModalDates").modal("hide")}}):alertify.alert("Please complete the form.",function(){a.attr("disabled",!1),a.html(b)})},paymentDetails:function(a,b){b.preventDefault();var c=a.payment_id;$(".right-panel-pane").fadeIn(100),$.ajax({url:"../ajax/ajax_paymentDetails.php",type:"POST",beforeSend:function(){$("#right-pane-container").html("Fetching record. Please wait.")},data:{id:c},success:function(a){$("#right-pane-container").html(a)}})},unsavedRequest:function(){var a=this;localStorage.wh_backup_items&&alertify.confirm("You have unsaved request. Do you want to load it?",function(b){b&&(a.request=JSON.parse(localStorage.wh_backup_request),a.items=JSON.parse(localStorage.wh_backup_items),a.disableMemberAndBranch())})},bundleDetails:function(a){$("#myModalBundle").modal("show"),$("#bbody").html("Loading..."),$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"getBundleItem",item_id:a.item_id,item_description:a.item_code},success:function(a){$("#bbody").html(a)},error:function(){alert("Error Occur")}})},getLayout:function(){localStorage.company_id&&$.ajax({url:"../ajax/ajax_query.php",type:"POST",data:{cid:localStorage.company_id,functionName:"getDocumentLayout"},success:function(a){var b=JSON.parse(a);localStorage.invoice_format=b.invoice,localStorage.dr_format=b.dr,localStorage.ir_format=b.ir,localStorage.news_format=b.extra}})},getTrucks:function(){var a=this;$.ajax({url:"../ajax/ajax_query2.php",type:"POST",dataType:"json",data:{functionName:"getTrucks"},success:function(b){a.trucks=b.trucks,a.helpers=b.helpers,a.drivers=b.drivers,a.countdel=b.count_del,a.countpickup=b.countpickup,localStorage.invoice_format=b.invoice,localStorage.dr_format=b.dr,localStorage.ir_format=b.ir}})},getInvoiceDrPr:function(){if(localStorage.terminal_id){var a=this;$.ajax({url:"../ajax/ajax_get_branchAndTerminal.php",type:"POST",data:{cid:localStorage.terminal_id,type:3},success:function(b){var c=b.split(":");localStorage.invoice=c[0],localStorage.end_invoice=c[1],localStorage.dr=c[2],localStorage.end_dr=c[3],localStorage.invoice_limit=c[4],localStorage.dr_limit=c[5],localStorage.ir=c[6],localStorage.end_ir=c[7],localStorage.ir_limit=c[8],localStorage.speed_opt=c[9],localStorage.use_printer=c[10],localStorage.data_sync=c[11],localStorage.news_print=c[12],localStorage.print_inv=c[13],localStorage.print_dr=c[14],localStorage.print_ir=c[15],localStorage.pref_inv=c[16],localStorage.pref_dr=c[17],localStorage.pref_ir=c[18],localStorage.suf_inv=c[19],localStorage.suf_dr=c[20],localStorage.suf_ir=c[21],localStorage.invoice&&(a.invoice=parseInt(localStorage.invoice)+1),localStorage.dr&&(a.dr=parseInt(localStorage.dr)+1),localStorage.ir&&(a.pr=parseInt(localStorage.ir)+1)}}),$("#conOverride").show()}else $("#conOverride").hide()},popUpPrintWithStyle:function(a){var b=window.open("","new div","");return b.document.write("<html><head><title></title><style></style>"),b.document.write('<link rel="stylesheet" href="../css/bootstrap.css" type="text/css" />'),b.document.write('</head><body style="padding:0;margin:0;">'),b.document.write(a),b.document.write("</body></html>"),setTimeout(function(){b.print(),b.close()},300),!0},popUpPrint:function(a,b){var c=window.open("","new div","");return c.document.write("<html><head><title></title><style></style>"),b&&c.document.write('<link rel="stylesheet" href="../css/bootstrap.css" type="text/css" />'),c.document.write('</head><body style="padding:0;margin:0;">'),c.document.write(a),c.document.write("</body></html>"),c.print(),c.close(),!0},printGroup:function(a){var b=$("#chkInvoice").is(":checked"),c=$("#chkDr").is(":checked"),d=$("#chkPr").is(":checked"),e=this,f=!1;if(b?f=!0:e.invoice=0,c?f=!0:e.dr=0,d?f=!0:e.pr=0,f){if(e.ajaxRequest)return;e.ajaxRequest=!0,$(".loading").show();var g=localStorage.pref_inv?localStorage.pref_inv:"",h=localStorage.pref_dr?localStorage.pref_dr:"",i=localStorage.pref_ir?localStorage.pref_ir:"",j=localStorage.suf_inv?localStorage.suf_inv:"",k=localStorage.suf_dr?localStorage.suf_dr:"",l=localStorage.suf_ir?localStorage.suf_ir:"",m=$("#custom_date").val();$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"getItemForInvoicePrintingWh",order_id:a,order_type:4,invoice:e.invoice,dr:e.dr,pr:e.pr,terminal_id:localStorage.terminal_id,rePrint:0,custom_date:m,pref_inv:g,pref_dr:h,pref_ir:i,suf_inv:j,suf_dr:k,suf_ir:l},dataType:"json",success:function(a){console.log(a),e.print_data=a,$(".loading").hide(),b&&e.printElem(),c&&e.printElemDr(),d&&e.printElemPr(),localStorage.news_print&&1==localStorage.news_print&&e.printElemNewsPrint(),e.ajaxRequest=!1,e.fetchedOrder(1),e.getInvoiceDrPr(),tempToast("info","<p>Action completed successfully</p>","<h4>Information!</h4>")},error:function(){alertify.error("Please set your computer as terminal first."),e.ajaxRequest=!1,$(".loading").hide()}})}else e.fetchedOrder(1),e.getInvoiceDrPr()},rePrintInvoice:function(a,b){var c=this;if(!c.ajaxRequest){c.ajaxRequest=!0,$(".loading").show();var d=localStorage.pref_inv?localStorage.pref_inv:"",e=localStorage.pref_dr?localStorage.pref_dr:"",f=localStorage.pref_ir?localStorage.pref_ir:"",g=localStorage.suf_inv?localStorage.suf_inv:"",h=localStorage.suf_dr?localStorage.suf_dr:"",i=localStorage.suf_ir?localStorage.suf_ir:"",j=$("#custom_date").val();$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"getItemForInvoicePrintingWh",order_id:a.id,order_type:b,invoice:c.invoice,dr:c.dr,terminal_id:localStorage.terminal_id,rePrint:1,pref_inv:d,pref_dr:e,pref_ir:f,custom_date:j,suf_inv:g,suf_dr:h,suf_ir:i},dataType:"json",success:function(a){c.print_data=a,$(".loading").hide(),1==b?c.printElem():2==b&&c.printElemDr(),tempToast("info","<p>Action completed successfully</p>","<h4>Information!</h4>"),c.ajaxRequest=!1},error:function(){alertify.error("Error Occur. Please try again."),c.ajaxRequest=!1,$(".loading").hide()}})}},printInvoice:function(a,b){var c=this;c.ajaxRequest||(c.ajaxRequest=!0,$(".loading").show(),1==b?alertify.confirm("The next invoice is "+c.invoice+". Do you want to continue?",function(d){if(d){var e=localStorage.pref_inv?localStorage.pref_inv:"",f=localStorage.pref_dr?localStorage.pref_dr:"",g=localStorage.pref_ir?localStorage.pref_ir:"",k=(localStorage.suf_inv?localStorage.suf_inv:"",localStorage.suf_dr?localStorage.suf_dr:"",localStorage.suf_ir?localStorage.suf_ir:"",$("#custom_date").val());$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"getItemForInvoicePrintingWh",order_id:a.id,order_type:b,invoice:c.invoice,dr:c.dr,terminal_id:localStorage.terminal_id,rePrint:0,pref_inv:e,pref_dr:f,custom_date:k,pref_ir:g},dataType:"json",success:function(a){console.log(a),c.print_data=a,$(".loading").hide(),c.printElem(),localStorage.news_print&&1==localStorage.news_print&&c.printElemNewsPrint(),c.ajaxRequest=!1,c.fetchedOrder(1),c.getInvoiceDrPr(),tempToast("info","<p>Action completed successfully</p>","<h4>Information!</h4>")},error:function(){alertify.error("Please set your computer as terminal first."),c.ajaxRequest=!1,$(".loading").hide()}})}else $(".loading").hide()}):2==b?alertify.confirm("The next dr is "+c.dr+". Do you want to continue?",function(d){if(d){var e=localStorage.pref_inv?localStorage.pref_inv:"",f=localStorage.pref_dr?localStorage.pref_dr:"",g=localStorage.pref_ir?localStorage.pref_ir:"",h=localStorage.suf_inv?localStorage.suf_inv:"",i=localStorage.suf_dr?localStorage.suf_dr:"",j=localStorage.suf_ir?localStorage.suf_ir:"",k=$("#custom_date").val();$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"getItemForInvoicePrintingWh",order_id:a.id,order_type:b,invoice:c.invoice,dr:c.dr,terminal_id:localStorage.terminal_id,rePrint:0,pref_inv:e,pref_dr:f,pref_ir:g,custom_date:k,suf_inv:h,suf_dr:i,suf_ir:j},dataType:"json",success:function(a){console.log(a),c.print_data=a,$(".loading").hide(),c.printElemDr(),localStorage.news_print&&1==localStorage.news_print&&c.printElemNewsPrint(),c.ajaxRequest=!1,c.fetchedOrder(1),c.getInvoiceDrPr(),tempToast("info","<p>Action completed successfully</p>","<h4>Information!</h4>")},error:function(){alertify.error("Please set your computer as terminal first."),c.ajaxRequest=!1,$(".loading").hide()}})}else $(".loading").hide()}):3==b&&alertify.confirm("The next PR is "+c.pr+". Do you want to continue?",function(d){if(d){var e=localStorage.pref_inv?localStorage.pref_inv:"",f=localStorage.pref_dr?localStorage.pref_dr:"",g=localStorage.pref_ir?localStorage.pref_ir:"",h=localStorage.suf_inv?localStorage.suf_inv:"",i=localStorage.suf_dr?localStorage.suf_dr:"",j=localStorage.suf_ir?localStorage.suf_ir:"",k=$("#custom_date").val();$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"getItemForInvoicePrintingWh",order_id:a.id,order_type:b,invoice:c.invoice,dr:c.dr,pr:c.pr,terminal_id:localStorage.terminal_id,rePrint:0,pref_inv:e,pref_dr:f,pref_ir:g,custom_date:k,suf_inv:h,suf_dr:i,suf_ir:j},dataType:"json",success:function(a){console.log(a),c.print_data=a,$(".loading").hide(),c.printElemPr(),localStorage.news_print&&1==localStorage.news_print&&c.printElemNewsPrint(),c.ajaxRequest=!1,c.fetchedOrder(1),c.getInvoiceDrPr(),tempToast("info","<p>Action completed successfully</p>","<h4>Information!</h4>")},error:function(){alertify.error("Please set your computer as terminal first."),c.ajaxRequest=!1,$(".loading").hide()}})}else $(".loading").hide()}))},str_pad:function(a,b,c){return"undefined"==typeof b?a:c?(a+b).slice(-a.length):(b+a).substring(0,a.length)},printElem:function(){if(0==localStorage.print_inv)return!0;var a=this.print_data,b=a.member_name,d=(a.cashier_name,a.member_id),e=JSON.parse(localStorage.invoice_format),f=a.remarks,g=a.station_address,h=a.station_id,i=a.station_name,j=a.date_sold,k="";b||(b=""),g||(g=""),h||(h=""),i||(i="");var l;l=b.split(","),b=l[0];var m="";if(localStorage.members&&(m=JSON.parse(localStorage.members)),m)for(var n in m){var o=m[n];o.id==d&&(i=o.personal_address+"<br>Contact Person: "+o.firstname+" "+o.lastname+"<br>Contact #: "+o.contact_number)}var p=e.date.visible?"display:block;":"display:none;",q=e.membername.visible?"display:block;":"display:none;",r=e.memberaddress.visible?"display:block;":"display:none;",s=e.stationname.visible?"display:block;":"display:none;",t=e.stationaddress.visible?"display:block;":"display:none;",u=e.itemtable.visible?"display:block;":"display:none;",v=e.payments.visible?"display:block;":"display:none;",w=e.payments2.visible?"display:block;":"display:none;",x=e.payments3.visible?"display:block;":"display:none;",y=e.cashier.visible?"display:block;":"display:none;",z=e.remarks.visible?"display:block;":"display:none;",A=e.reserved.visible?"display:block;":"display:none;",B=e.tdbarcode.visible?"display:inline-block;":"display:none;",C=e.tdqty.visible?"display:inline-block;":"display:none;",D=e.tddescription.visible?"display:inline-block;":"display:none;",E=e.tdprice.visible?"display:inline-block;":"display:none;",F=e.tdtotal.visible?"display:inline-block;":"display:none;",G=e.date.bold?"font-weight:bold;":"font-weight:normal;",H=e.membername.bold?"font-weight:bold;":"font-weight:normal;",I=e.memberaddress.bold?"font-weight:bold;":"font-weight:normal;",J=e.stationname.bold?"font-weight:bold;":"font-weight:normal;",K=e.stationaddress.bold?"font-weight:bold;":"font-weight:normal;",L=e.itemtable.bold?"font-weight:bold;":"font-weight:normal;",M=e.payments.bold?"font-weight:bold;":"font-weight:normal;",N=e.payments2.bold?"font-weight:bold;":"font-weight:normal;",O=e.payments3.bold?"font-weight:bold;":"font-weight:normal;",P=e.cashier.bold?"font-weight:bold;":"font-weight:normal;",Q=e.remarks.bold?"font-weight:bold;":"font-weight:normal;",R=e.reserved.bold?"font-weight:bold;":"font-weight:normal;",S=e.tdbarcode.bold?"font-weight:bold;":"font-weight:normal;",T=e.tdqty.bold?"font-weight:bold;":"font-weight:normal;",U=e.tddescription.bold?"font-weight:bold;":"font-weight:normal;",V=e.tdprice.bold?"font-weight:bold;":"font-weight:normal;",W=e.tdtotal.bold?"font-weight:bold;":"font-weight:normal;";k+="<div id='maindivforprinting' style='page-break-before: always;position:relative;'>",k=k+"<div style='"+p+G+"position:absolute;top:"+e.date.top+"px; left:"+e.date.left+"px;font-size:"+e.date.fontSize+"px;'> <br/><br/>"+j+" </div><div style='clear:both;'></div>",k=k+"<div style='"+q+H+"position:absolute;top:"+e.membername.top+"px; left:"+e.membername.left+"px;font-size:"+e.membername.fontSize+"px;'>"+b+"</div>",k=k+"<div style='"+r+I+"position:absolute;top:"+e.memberaddress.top+"px; left:"+e.memberaddress.left+"px;width:"+e.memberaddress.width+"px;font-size:"+e.memberaddress.fontSize+"px;'>"+i+"</div>",k=k+"<div style='"+s+J+"position:absolute;top:"+e.stationname.top+"px; left:"+e.stationname.left+"px;font-size:"+e.stationname.fontSize+"px;'>"+h+"</div>",k=k+"<div style='"+t+K+"position:absolute;top:"+e.stationaddress.top+"px; left:"+e.stationaddress.left+"px;width:"+e.stationaddress.width+"px;font-size:"+e.stationaddress.fontSize+"px;'>"+g+"</div>",k=k+"<table id='itemscon' style='"+u+L+"position:absolute;top:"+e.itemtable.top+"px;left:"+e.itemtable.left+"px;font-size:"+e.itemtable.fontSize+"px;'> ";var Y=($("#cart > tbody > tr").length,parseFloat(localStorage.invoice_limit)),_=(localStorage.dr_limit,[]),aa=1,ba=1,ca=0,fa=1.12;Y=parseInt(Y)+1;var ga=a.item_list;for(var n in ga){var ha=ga[n].item_code,ia=ga[n].description,ka=(ga[n].barcode,ga[n].unit_name);ka=ka?ka:"";var la=ga[n].qty+"<span style='margin-left:50px;'>"+ka+"</span>",ma=ga[n].price,na=ga[n].discount,oa=ga[n].total,qa=(ga[n].racking,oa);if(parseFloat(na)>0)var ra=parseFloat(na)/parseFloat(la),sa="<br/>(Disc. "+number_format(ra,2)+")",ta="<br/>("+number_format(na,2)+")";else var sa="",ta="";if(ba%Y==0){var ua=ca/fa,va=parseFloat(ca)-parseFloat(ua);ua=ua.toFixed(2),va=va.toFixed(2),ca=ca.toFixed(2),_[aa]=_[aa]+"</table>",_[aa]=_[aa]+"<div style='"+v+M+"position:absolute; list-style-type: none; left:"+e.payments.left+"px;top:"+e.payments.top+"px;font-size:"+e.payments.fontSize+"px;'>"+ua+"</div>",_[aa]=_[aa]+"<div style='"+w+N+"position:absolute; list-style-type: none; left:"+e.payments2.left+"px;top:"+e.payments2.top+"px;font-size:"+e.payments2.fontSize+"px;'>"+va+"</div>",_[aa]=_[aa]+"<div style='"+x+O+"position:absolute; list-style-type: none; left:"+e.payments3.left+"px;top:"+e.payments3.top+"px;font-size:"+e.payments3.fontSize+"px;'>"+ca+"</div>",aa=parseInt(aa)+1,ca=0}ca=parseFloat(ca)+parseFloat(oa),_[aa]=_[aa]+"<tr ><td style='"+C+T+"position:relative;width:"+e.tdqty.width+"px;padding-left:"+e.tdqty.left+"px;'>"+la+"</td><td style='"+B+S+"position:relative;width:"+e.tdbarcode.width+"px;padding-left:"+e.tdbarcode.left+"px;'>"+ha+"</td><td style='"+D+U+"position:relative;width:"+e.tddescription.width+"px;padding-left:"+e.tddescription.left+"px;'> "+ia+" <span style='padding-left:20px;'>"+sa+"</span> </td><td style='"+E+V+"position:relative;width:"+e.tdprice.width+"px;padding-left:"+e.tdprice.left+"px;'>"+number_format(ma,2)+"</td><td style='"+F+W+"position:relative;width:"+e.tdtotal.width+"px;padding-left:"+e.tdtotal.left+"px;'>"+number_format(qa,2)+" "+ta+"</td></tr>",ba=parseInt(ba)+1}if(ca>0){var ua=ca/fa,va=parseFloat(ca)-parseFloat(ua);ua=ua.toFixed(2),va=va.toFixed(2),ca=ca.toFixed(2),_[aa]=_[aa]+"</table>",_[aa]=_[aa]+"<div style='"+v+M+"position:absolute; list-style-type: none; left:"+e.payments.left+"px;top:"+e.payments.top+"px;font-size:"+e.payments.fontSize+"px;'>"+ua+"</div>",_[aa]=_[aa]+"<div style='"+w+N+"position:absolute; list-style-type: none; left:"+e.payments2.left+"px;top:"+e.payments2.top+"px;font-size:"+e.payments2.fontSize+"px;'>"+va+"</div>",_[aa]=_[aa]+"<div style='"+x+O+"position:absolute; list-style-type: none; left:"+e.payments3.left+"px;top:"+e.payments3.top+"px;font-size:"+e.payments3.fontSize+"px;'>"+ca+"</div>"}var wa="",xa="";wa=wa+"<div style='"+y+P+"position:absolute;left:"+e.cashier.left+"px;top:"+e.cashier.top+"px;font-size:"+e.cashier.fontSize+"px;'>"+localStorage.current_lastname+", "+localStorage.current_firstname+"</div>",wa=wa+"<div style='"+z+Q+"position:absolute;left:"+e.remarks.left+"px;top:"+e.remarks.top+"px;font-size:"+e.remarks.fontSize+"px;'>"+f+"</div>",wa=wa+"<div style='"+A+R+"position:absolute;left:"+e.reserved.left+"px;top:"+e.reserved.top+"px;font-size:"+e.reserved.fontSize+"px;'>"+xa+"</div>";var ya=$("#custom_invoice").val(),za=parseInt(localStorage.invoice)+1,Aa=ya?ya:za,Ba=localStorage.pref_inv?localStorage.pref_inv:"",Ca=localStorage.suf_inv?localStorage.suf_inv:"";Aa=this.str_pad("000000",Aa,!0),Aa=Ba+Aa+Ca;var Da="",Ea="",Fa="",Ga=e.terms.visible?"display:inline-block;":"display:none;",Ha=e.drnum.visible?"display:inline-block;":"display:none;",Ia=e.ponum.visible?"display:inline-block;":"display:none;",Ja=e.tin.visible?"display:inline-block;":"display:none;",Ka=e.drnum.bold?"font-weight:bold;":"font-weight:normal;",La=e.terms.bold?"font-weight:bold;":"font-weight:normal;",Ma=e.ponum.bold?"font-weight:bold;":"font-weight:normal;",Na=e.tin.bold?"font-weight:bold;":"font-weight:normal;";wa=wa+"<div style='"+Ha+Ka+"position:absolute;left:"+e.drnum.left+"px;top:"+e.drnum.top+"px;font-size:"+e.drnum.fontSize+"px;'>"+Aa+"</div>",wa=wa+"<div style='"+Ga+La+"position:absolute;left:"+e.terms.left+"px;top:"+e.terms.top+"px;font-size:"+e.terms.fontSize+"px;'>"+Da+"</div>",wa=wa+"<div style='"+Ia+Ma+"position:absolute;left:"+e.ponum.left+"px;top:"+e.ponum.top+"px;font-size:"+e.ponum.fontSize+"px;'>"+Ea+"</div>",wa=wa+"<div style='"+Ja+Na+"position:absolute;left:"+e.tin.left+"px;top:"+e.tin.top+"px;font-size:"+e.tin.fontSize+"px;'>"+Fa+"</div>",wa+="</div>";var Oa="";for(var n in _)Oa=Oa+k+_[n]+wa;this.popUpPrint(Oa)},printElemPr:function(){if(0==localStorage.print_ir)return!0;var a=this.print_data,b=a.member_name,d=(a.cashier_name,JSON.parse(localStorage.ir_format)),e=a.remarks,f=a.station_address,g=a.station_id,h=a.station_name,i=a.member_id,j=a.date_sold,k="";b||(b=""),f||(f=""),g||(g=""),h||(h="");var l;l=b.split(","),b=l[0];var m="";if(localStorage.members&&(m=JSON.parse(localStorage.members)),m)for(var n in m){var o=m[n];o.id==i&&(h=o.personal_address+"<br>Contact Person: "+o.firstname+" "+o.lastname+"<br>Contact #: "+o.contact_number)}for(var d=JSON.parse(localStorage.ir_format),p=d.date.visible?"display:block;":"display:none;",q=d.membername.visible?"display:block;":"display:none;",r=d.memberaddress.visible?"display:block;":"display:none;",s=d.stationname.visible?"display:block;":"display:none;",t=d.stationaddress.visible?"display:block;":"display:none;",v=(d.itemtable.visible?"display:block;":"display:none;",d.payments.visible?"display:block;":"display:none;"),w=d.payments2.visible?"display:block;":"display:none;",x=d.payments3.visible?"display:block;":"display:none;",y=d.cashier.visible?"display:block;":"display:none;",z=d.remarks.visible?"display:block;":"display:none;",A=d.reserved.visible?"display:block;":"display:none;",B=d.tdbarcode.visible?"display:inline-block;":"display:none;",C=d.tdqty.visible?"display:inline-block;":"display:none;",D=d.tddescription.visible?"display:inline-block;":"display:none;",E=d.tdprice.visible?"display:inline-block;":"display:none;",F=d.tdtotal.visible?"display:inline-block;":"display:none;",G=d.date.bold?"font-weight:bold;":"font-weight:normal;",H=d.membername.bold?"font-weight:bold;":"font-weight:normal;",I=d.memberaddress.bold?"font-weight:bold;":"font-weight:normal;",J=d.stationname.bold?"font-weight:bold;":"font-weight:normal;",K=d.stationaddress.bold?"font-weight:bold;":"font-weight:normal;",M=(d.itemtable.bold?"font-weight:bold;":"font-weight:normal;",d.payments.bold?"font-weight:bold;":"font-weight:normal;"),N=d.payments2.bold?"font-weight:bold;":"font-weight:normal;",O=d.payments3.bold?"font-weight:bold;":"font-weight:normal;",P=d.cashier.bold?"font-weight:bold;":"font-weight:normal;",Q=d.remarks.bold?"font-weight:bold;":"font-weight:normal;",R=d.reserved.bold?"font-weight:bold;":"font-weight:normal;",S=d.tdbarcode.bold?"font-weight:bold;":"font-weight:normal;",T=d.tdqty.bold?"font-weight:bold;":"font-weight:normal;",U=d.tddescription.bold?"font-weight:bold;":"font-weight:normal;",V=d.tdprice.bold?"font-weight:bold;":"font-weight:normal;",W=d.tdtotal.bold?"font-weight:bold;":"font-weight:normal;",X=2,Y="",Z=1;Z<=X;Z++){1==Z?(E="display:none;",F="display:none;"):(E=d.tdprice.visible?"display:inline-block;":"display:none;",F=d.tdtotal.visible?"display:inline-block;":"display:none;");var k="";k+="<div id='maindivforprinting' style='page-break-before: always;position:relative;'>&nbsp;",k=k+"<div style='"+p+G+"position:absolute;top:"+d.date.top+"px; left:"+d.date.left+"px;font-size:"+d.date.fontSize+"px;'><br/><br/>"+j+" </div><div style='clear:both;'></div>",
	k=k+"<div style='"+q+H+"position:absolute;top:"+d.membername.top+"px; left:"+d.membername.left+"px;font-size:"+d.membername.fontSize+"px;'>"+b+"</div>",k=k+"<div style='"+r+I+"position:absolute;top:"+d.memberaddress.top+"px; left:"+d.memberaddress.left+"px;width:"+d.memberaddress.width+"px;font-size:"+d.memberaddress.fontSize+"px;'>"+h+"</div>",k=k+"<div style='"+s+J+"position:absolute;top:"+d.stationname.top+"px; left:"+d.stationname.left+"px;font-size:"+d.stationname.fontSize+"px;'>"+g+"</div>",k=k+"<div style='"+t+K+"position:absolute;top:"+d.stationaddress.top+"px; left:"+d.stationaddress.left+"px;width:"+d.stationaddress.width+"px;font-size:"+d.stationaddress.fontSize+"px;'>"+f+"</div>",k=k+"<table id='itemscon' style='position:absolute;top:"+d.itemtable.top+"px;left:"+d.itemtable.left+"px;font-size:"+d.itemtable.fontSize+"px;'> ";var aa=($("#cart > tbody > tr").length,localStorage.ir_limit),ba=[],ca=1,da=1,ea=0,ha=1.12;aa=parseInt(aa)+1;var ia=a.item_list;for(var n in ia){var ja=ia[n].item_code,ka=ia[n].description,ma=(ia[n].barcode,ia[n].unit_name);ma=ma?ma:"";var na=ia[n].qty+"<span style='margin-left:50px;'>"+ma+"</span>",oa=ia[n].price,pa=ia[n].discount,qa=ia[n].total,ra=qa;if(parseFloat(pa)>0)var sa=parseFloat(pa)/parseFloat(na),ta="<br/>(Disc. "+number_format(sa,2)+")",ua="<br/>("+number_format(pa,2)+")";else var ta="",ua="";if(da%aa==0){var va=ea/ha,wa=parseFloat(ea)-parseFloat(va);va=va.toFixed(2),wa=wa.toFixed(2),ea=ea.toFixed(2),ba[ca]=ba[ca]+"</table>",ba[ca]=ba[ca]+"<div style='"+v+M+"position:absolute; list-style-type: none; left:"+d.payments.left+"px;top:"+d.payments.top+"px;font-size:"+d.payments.fontSize+"px;'>"+va+"</div>",ba[ca]=ba[ca]+"<div style='"+w+N+"position:absolute; list-style-type: none; left:"+d.payments2.left+"px;top:"+d.payments2.top+"px;font-size:"+d.payments2.fontSize+"px;'>"+wa+"</div>",ba[ca]=ba[ca]+"<div style='"+x+O+"position:absolute; list-style-type: none; left:"+d.payments3.left+"px;top:"+d.payments3.top+"px;font-size:"+d.payments3.fontSize+"px;'>"+ea+"</div>",ca=parseInt(ca)+1,ea=0}ea=parseFloat(ea)+parseFloat(qa),ba[ca]=ba[ca]+"<tr ><td style='"+C+T+"position:relative;width:"+d.tdqty.width+"px;padding-left:"+d.tdqty.left+"px;'>"+na+"</td><td style='"+B+S+"position:relative;width:"+d.tdbarcode.width+"px;padding-left:"+d.tdbarcode.left+"px;'>"+ja+"</td><td style='"+D+U+"position:relative;width:"+d.tddescription.width+"px;padding-left:"+d.tddescription.left+"px;'> "+ka+" <span style='padding-left:20px;'>"+ta+"</span> </td><td style='"+E+V+"position:relative;width:"+d.tdprice.width+"px;padding-left:"+d.tdprice.left+"px;'>"+number_format(oa,2)+"</td><td style='"+F+W+"position:relative;width:"+d.tdtotal.width+"px;padding-left:"+d.tdtotal.left+"px;'>"+number_format(ra,2)+" "+ua+"</td></tr>",da=parseInt(da)+1}if(ea>0){var va=ea/ha,wa=parseFloat(ea)-parseFloat(va);va=va.toFixed(2),wa=wa.toFixed(2),ea=ea.toFixed(2),ba[ca]=ba[ca]+"</table>",ba[ca]=ba[ca]+"<div style='"+v+M+"position:absolute; list-style-type: none; left:"+d.payments.left+"px;top:"+d.payments.top+"px;font-size:"+d.payments.fontSize+"px;'>"+va+"</div>",ba[ca]=ba[ca]+"<div style='"+w+N+"position:absolute; list-style-type: none; left:"+d.payments2.left+"px;top:"+d.payments2.top+"px;font-size:"+d.payments2.fontSize+"px;'>"+wa+"</div>",ba[ca]=ba[ca]+"<div style='"+x+O+"position:absolute; list-style-type: none; left:"+d.payments3.left+"px;top:"+d.payments3.top+"px;font-size:"+d.payments3.fontSize+"px;'>"+ea+"</div>"}var xa="",ya="";xa=xa+"<div style='"+y+P+"position:absolute;left:"+d.cashier.left+"px;top:"+d.cashier.top+"px;font-size:"+d.cashier.fontSize+"px;'>"+localStorage.current_lastname+", "+localStorage.current_firstname+"</div>",xa=xa+"<div style='"+z+Q+"position:absolute;left:"+d.remarks.left+"px;top:"+d.remarks.top+"px;font-size:"+d.remarks.fontSize+"px;'>"+e+"</div>",xa=xa+"<div style='"+A+R+"position:absolute;left:"+d.reserved.left+"px;top:"+d.reserved.top+"px;font-size:"+d.reserved.fontSize+"px;'>"+ya+"</div>";var za=$("#custom_pr").val(),Aa=parseInt(localStorage.ir)+1,Ba=za?za:Aa,Ca=localStorage.pref_ir?localStorage.pref_ir:"",Da=localStorage.suf_ir?localStorage.suf_ir:"";Ba=this.str_pad("000000",Ba,!0),Ba=Ca+Ba+Da;var Ea="",Fa="",Ga="",Ha=d.terms.visible?"display:inline-block;":"display:none;",Ia=d.drnum.visible?"display:inline-block;":"display:none;",Ja=d.ponum.visible?"display:inline-block;":"display:none;",Ka=d.tin.visible?"display:inline-block;":"display:none;",La=d.drnum.bold?"font-weight:bold;":"font-weight:normal;",Ma=d.terms.bold?"font-weight:bold;":"font-weight:normal;",Na=d.ponum.bold?"font-weight:bold;":"font-weight:normal;",Oa=d.tin.bold?"font-weight:bold;":"font-weight:normal;";xa=xa+"<div style='"+Ia+La+"position:absolute;left:"+d.drnum.left+"px;top:"+d.drnum.top+"px;font-size:"+d.drnum.fontSize+"px;'>"+Ba+"</div>",xa=xa+"<div style='"+Ha+Ma+"position:absolute;left:"+d.terms.left+"px;top:"+d.terms.top+"px;font-size:"+d.terms.fontSize+"px;'>"+Ea+"</div>",xa=xa+"<div style='"+Ja+Na+"position:absolute;left:"+d.ponum.left+"px;top:"+d.ponum.top+"px;font-size:"+d.ponum.fontSize+"px;'>"+Fa+"</div>",xa=xa+"<div style='"+Ka+Oa+"position:absolute;left:"+d.tin.left+"px;top:"+d.tin.top+"px;font-size:"+d.tin.fontSize+"px;'>"+Ga+"</div>",xa+="</div>";var Pa="";for(var n in ba)Pa=Pa+k+ba[n]+xa;Pa=replaceAll(Pa,"undefined",""),Y+="<div>"+Pa+"</div>"}this.popUpPrint(Y)},printElemDr:function(){if(0==localStorage.print_dr)return!0;var a=$("#with_form_style").val(),b="",c="",d="",e="",f="",g="",h="",i="",j="",k="";1==a&&(b="border:1px solid #ccc;",h="margin: 0 auto;border-collapse:collapse;",c="<span>Date: </span>",d="<span>Client: </span>",e="<span>Address: </span>",i="<span style='display:inline-block;width:70px;'>Vat: </span>",j="<span style='display:inline-block;width:70px;'>Vatable: </span>",k="<span style='display:inline-block;width:70px;'>Total: </span>",g="<h1 style='font-weight:normal;text-align:center;margin-top:0px;'>"+$("#co_name").val(),g+="<span style='font-weight:normal;display:block;font-size:14px;text-align:center;'>"+$("#co_desc").val()+"</span>",g+="<span style='font-weight:normal;display:block;font-size:14px;text-align:center;'>"+$("#co_address").val()+"</span>",g+="</h3>");var l=this.print_data,m=l.member_name,o=(l.cashier_name,JSON.parse(localStorage.dr_format)),p=l.remarks,q=l.station_address,r=l.station_id,s=l.station_name,t=l.member_id,u=l.date_sold,v="";m||(m=""),q||(q=""),r||(r=""),s||(s="");var w;w=m.split(","),m=w[0];var x="";if(localStorage.members&&(x=JSON.parse(localStorage.members)),x)for(var y in x){var z=x[y];z.id==t&&(s=z.personal_address+"<br>Contact Person: "+z.firstname+" "+z.lastname+"<br>Contact #: "+z.contact_number)}for(var o=JSON.parse(localStorage.dr_format),A=o.date.visible?"display:block;":"display:none;",B=o.membername.visible?"display:block;":"display:none;",C=o.memberaddress.visible?"display:block;":"display:none;",D=o.stationname.visible?"display:block;":"display:none;",E=o.stationaddress.visible?"display:block;":"display:none;",G=(o.itemtable.visible?"display:block;":"display:none;",o.payments.visible?"display:block;":"display:none;"),H=o.payments2.visible?"display:block;":"display:none;",I=o.payments3.visible?"display:block;":"display:none;",J=o.cashier.visible?"display:block;":"display:none;",K=o.remarks.visible?"display:block;":"display:none;",L=o.reserved.visible?"display:block;":"display:none;",M=o.tdbarcode.visible?"display:inline-block;":"display:none;",N=o.tdqty.visible?"display:inline-block;":"display:none;",O=o.tddescription.visible?"display:inline-block;":"display:none;",P=o.tdprice.visible?"display:inline-block;":"display:none;",Q=o.tdtotal.visible?"display:inline-block;":"display:none;",R=o.date.bold?"font-weight:bold;":"font-weight:normal;",S=o.membername.bold?"font-weight:bold;":"font-weight:normal;",T=o.memberaddress.bold?"font-weight:bold;":"font-weight:normal;",U=o.stationname.bold?"font-weight:bold;":"font-weight:normal;",V=o.stationaddress.bold?"font-weight:bold;":"font-weight:normal;",X=(o.itemtable.bold?"font-weight:bold;":"font-weight:normal;",o.payments.bold?"font-weight:bold;":"font-weight:normal;"),Y=o.payments2.bold?"font-weight:bold;":"font-weight:normal;",Z=o.payments3.bold?"font-weight:bold;":"font-weight:normal;",_=o.cashier.bold?"font-weight:bold;":"font-weight:normal;",aa=o.remarks.bold?"font-weight:bold;":"font-weight:normal;",ba=o.reserved.bold?"font-weight:bold;":"font-weight:normal;",ca=o.tdbarcode.bold?"font-weight:bold;":"font-weight:normal;",da=o.tdqty.bold?"font-weight:bold;":"font-weight:normal;",ea=o.tddescription.bold?"font-weight:bold;":"font-weight:normal;",fa=o.tdprice.bold?"font-weight:bold;":"font-weight:normal;",ga=o.tdtotal.bold?"font-weight:bold;":"font-weight:normal;",ha=1,ia="",ja=1;ja<=ha;ja++){1==ja?(P=o.tdprice.visible?"display:inline-block;":"display:none;",Q=o.tdtotal.visible?"display:inline-block;":"display:none;"):(P=o.tdprice.visible?"display:inline-block;":"display:none;",Q=o.tdtotal.visible?"display:inline-block;":"display:none;");var v="";v=v+"<div id='maindivforprinting' style='page-break-before: always;position:relative;'>&nbsp;"+g,v=v+"<div style='"+A+R+"position:absolute;top:"+o.date.top+"px; left:"+o.date.left+"px;font-size:"+o.date.fontSize+"px;'>"+c+u+" </div><div style='clear:both;'></div>",v=v+"<div style='"+B+S+"position:absolute;top:"+o.membername.top+"px; left:"+o.membername.left+"px;font-size:"+o.membername.fontSize+"px;'>"+d+m+"</div>",v=v+"<div style='"+C+T+"position:absolute;top:"+o.memberaddress.top+"px; left:"+o.memberaddress.left+"px;width:"+o.memberaddress.width+"px;font-size:"+o.memberaddress.fontSize+"px;'>"+e+s+"</div>",v=v+"<div style='"+D+U+"position:absolute;top:"+o.stationname.top+"px; left:"+o.stationname.left+"px;font-size:"+o.stationname.fontSize+"px;'>"+r+"</div>",v=v+"<div style='"+E+V+"position:absolute;top:"+o.stationaddress.top+"px; left:"+o.stationaddress.left+"px;width:"+o.stationaddress.width+"px;font-size:"+o.stationaddress.fontSize+"px;'>"+q+"</div>",v=v+"<table id='itemscon'  style='"+h+"position:absolute;top:"+o.itemtable.top+"px;left:"+o.itemtable.left+"px;font-size:"+o.itemtable.fontSize+"px;'> ",1==a&&(f="<tr ><th style='"+b+N+da+"position:relative;width:"+o.tdqty.width+"px;padding-left:"+o.tdqty.left+"px;'>Qty</th><th style='"+b+M+ca+"position:relative;width:"+o.tdbarcode.width+"px;padding-left:"+o.tdbarcode.left+"px;'>Item</th><th style='"+b+O+ea+"position:relative;width:"+o.tddescription.width+"px;padding-left:"+o.tddescription.left+"px;'> Description </th><th style='"+b+P+fa+"position:relative;width:"+o.tdprice.width+"px;padding-left:"+o.tdprice.left+"px;'>Price</th><th style='"+b+Q+ga+"position:relative;width:"+o.tdtotal.width+"px;padding-left:"+o.tdtotal.left+"px;'>Total</th></tr>"),v+=f;var la=($("#cart > tbody > tr").length,localStorage.dr_limit),ma=[],na=1,oa=1,pa=0,sa=1.12;la=parseInt(la)+1;var ta=l.item_list;for(var y in ta){var ua=ta[y].item_code,va=ta[y].description,xa=(ta[y].barcode,ta[y].unit_name);xa=xa?xa:"";var ya=ta[y].qty+"<span style='margin-left:50px;'>"+xa+"</span>",za=ta[y].price,Aa=ta[y].discount,Ba=ta[y].total,Ca=Ba;if(parseFloat(Aa)>0)var Da=parseFloat(Aa)/parseFloat(ya),Ea="<br/>(Disc. "+number_format(Da,2)+")",Fa="<br/>("+number_format(Aa,2)+")";else var Ea="",Fa="";if(oa%la==0){var Ga=pa/sa,Ha=parseFloat(pa)-parseFloat(Ga);Ga=Ga.toFixed(2),Ha=Ha.toFixed(2),pa=pa.toFixed(2),ma[na]=ma[na]+"</table>",ma[na]=ma[na]+"<div style='"+G+X+"position:absolute; list-style-type: none; left:"+o.payments.left+"px;top:"+o.payments.top+"px;font-size:"+o.payments.fontSize+"px;'>"+j+Ga+"</div>",ma[na]=ma[na]+"<div style='"+H+Y+"position:absolute; list-style-type: none; left:"+o.payments2.left+"px;top:"+o.payments2.top+"px;font-size:"+o.payments2.fontSize+"px;'>"+i+Ha+"</div>",ma[na]=ma[na]+"<div style='"+I+Z+"position:absolute; list-style-type: none; left:"+o.payments3.left+"px;top:"+o.payments3.top+"px;font-size:"+o.payments3.fontSize+"px;'>"+k+pa+"</div>",na=parseInt(na)+1,pa=0}pa=parseFloat(pa)+parseFloat(Ba),ma[na]=ma[na]+"<tr ><td style='"+b+N+da+"position:relative;width:"+o.tdqty.width+"px;padding-left:"+o.tdqty.left+"px;'>"+ya+"</td><td style='"+b+M+ca+"position:relative;width:"+o.tdbarcode.width+"px;padding-left:"+o.tdbarcode.left+"px;'>"+ua+"</td><td style='"+b+O+ea+"position:relative;width:"+o.tddescription.width+"px;padding-left:"+o.tddescription.left+"px;'> "+va+" <span style='padding-left:20px;'>"+Ea+"</span> </td><td style='"+b+P+fa+"position:relative;width:"+o.tdprice.width+"px;padding-left:"+o.tdprice.left+"px;'>"+number_format(za,2)+"</td><td style='"+b+Q+ga+"position:relative;width:"+o.tdtotal.width+"px;padding-left:"+o.tdtotal.left+"px;'>"+number_format(Ca,2)+" "+Fa+"</td></tr>",oa=parseInt(oa)+1}if(pa>0){var Ga=pa/sa,Ha=parseFloat(pa)-parseFloat(Ga);if(Ga=Ga.toFixed(2),Ha=Ha.toFixed(2),pa=pa.toFixed(2),1==a)for(var Ia=oa;Ia<=la;Ia++)ma[na]=ma[na]+"<tr ><td style='"+b+N+da+"position:relative;width:"+o.tdqty.width+"px;padding-left:"+o.tdqty.left+"px;'>&nbsp;</td><td style='"+b+M+ca+"position:relative;width:"+o.tdbarcode.width+"px;padding-left:"+o.tdbarcode.left+"px;'>&nbsp;</td><td style='"+b+O+ea+"position:relative;width:"+o.tddescription.width+"px;padding-left:"+o.tddescription.left+"px;'>&nbsp;<span style='padding-left:20px;'></span> </td><td style='"+b+P+fa+"position:relative;width:"+o.tdprice.width+"px;padding-left:"+o.tdprice.left+"px;'>&nbsp;</td><td style='"+b+Q+ga+"position:relative;width:"+o.tdtotal.width+"px;padding-left:"+o.tdtotal.left+"px;'>&nbsp;</td></tr>";ma[na]=ma[na]+"</table>",ma[na]=ma[na]+"<div style='"+G+X+"position:absolute; list-style-type: none; left:"+o.payments.left+"px;top:"+o.payments.top+"px;font-size:"+o.payments.fontSize+"px;'>"+j+Ga+"</div>",ma[na]=ma[na]+"<div style='"+H+Y+"position:absolute; list-style-type: none; left:"+o.payments2.left+"px;top:"+o.payments2.top+"px;font-size:"+o.payments2.fontSize+"px;'>"+i+Ha+"</div>",ma[na]=ma[na]+"<div style='"+I+Z+"position:absolute; list-style-type: none; left:"+o.payments3.left+"px;top:"+o.payments3.top+"px;font-size:"+o.payments3.fontSize+"px;'>"+k+pa+"</div>"}var Ja="",Ka="";Ja=Ja+"<div style='"+J+_+"position:absolute;left:"+o.cashier.left+"px;top:"+o.cashier.top+"px;font-size:"+o.cashier.fontSize+"px;'>"+localStorage.current_lastname+", "+localStorage.current_firstname+"</div>",Ja=Ja+"<div style='"+K+aa+"position:absolute;left:"+o.remarks.left+"px;top:"+o.remarks.top+"px;font-size:"+o.remarks.fontSize+"px;'>"+p+"</div>",Ja=Ja+"<div style='"+L+ba+"position:absolute;left:"+o.reserved.left+"px;top:"+o.reserved.top+"px;font-size:"+o.reserved.fontSize+"px;'>"+Ka+"</div>";var La=$("#custom_dr").val(),Ma=parseInt(localStorage.dr)+1,Na=La?La:Ma,Oa=localStorage.pref_dr?localStorage.pref_dr:"",Pa=localStorage.suf_dr?localStorage.suf_dr:"";Na=this.str_pad("000000",Na,!0),Na=Oa+Na+Pa;var Qa="",Ra="",Sa="",Ta=o.terms.visible?"display:inline-block;":"display:none;",Ua=o.drnum.visible?"display:inline-block;":"display:none;",Va=o.ponum.visible?"display:inline-block;":"display:none;",Wa=o.tin.visible?"display:inline-block;":"display:none;",Xa=o.drnum.bold?"font-weight:bold;":"font-weight:normal;",Ya=o.terms.bold?"font-weight:bold;":"font-weight:normal;",Za=o.ponum.bold?"font-weight:bold;":"font-weight:normal;",$a=o.tin.bold?"font-weight:bold;":"font-weight:normal;",_a=""+Na,ab="00000";Na="#"+ab.substring(0,ab.length-_a.length)+_a,Ja=Ja+"<div style='"+Ua+Xa+"position:absolute;left:"+o.drnum.left+"px;top:"+o.drnum.top+"px;font-size:"+o.drnum.fontSize+"px;'>"+Na+"</div>",Ja=Ja+"<div style='"+Ta+Ya+"position:absolute;left:"+o.terms.left+"px;top:"+o.terms.top+"px;font-size:"+o.terms.fontSize+"px;'>"+Qa+"</div>",Ja=Ja+"<div style='"+Va+Za+"position:absolute;left:"+o.ponum.left+"px;top:"+o.ponum.top+"px;font-size:"+o.ponum.fontSize+"px;'>"+Ra+"</div>",Ja=Ja+"<div style='"+Wa+$a+"position:absolute;left:"+o.tin.left+"px;top:"+o.tin.top+"px;font-size:"+o.tin.fontSize+"px;'>"+Sa+"</div>",Ja+="</div>";var bb="";for(var y in ma)bb=bb+v+ma[y]+Ja;bb=replaceAll(bb,"undefined",""),ia+="<div>"+bb+"</div>"}console.log(ia),this.popUpPrint(ia)},printElemNewsPrint:function(){if(0==localStorage.print_dr)return!0;var a=this.print_data,b=a.member_name,d=(a.cashier_name,JSON.parse(localStorage.news_format)),e=a.remarks,f=a.station_address,g=a.station_id,h=a.station_name,i=a.member_id,j=a.date_sold,k="";b||(b=""),f||(f=""),g||(g=""),h||(h="");var l;l=b.split(","),b=l[0];var m="";if(localStorage.members&&(m=JSON.parse(localStorage.members)),m)for(var n in m){var o=m[n];o.id==i&&(h=o.personal_address+"<br>Contact Person: "+o.firstname+" "+o.lastname+"<br>Contact #: "+o.contact_number)}for(var d=JSON.parse(localStorage.dr_format),p=d.date.visible?"display:block;":"display:none;",q=d.membername.visible?"display:block;":"display:none;",r=d.memberaddress.visible?"display:block;":"display:none;",s=d.stationname.visible?"display:block;":"display:none;",t=d.stationaddress.visible?"display:block;":"display:none;",v=(d.itemtable.visible?"display:block;":"display:none;",d.payments.visible?"display:block;":"display:none;"),w=d.payments2.visible?"display:block;":"display:none;",x=d.payments3.visible?"display:block;":"display:none;",y=d.cashier.visible?"display:block;":"display:none;",z=d.remarks.visible?"display:block;":"display:none;",A=d.reserved.visible?"display:block;":"display:none;",B=d.tdbarcode.visible?"display:inline-block;":"display:none;",C=d.tdqty.visible?"display:inline-block;":"display:none;",D=d.tddescription.visible?"display:inline-block;":"display:none;",E=d.tdprice.visible?"display:inline-block;":"display:none;",F=d.tdtotal.visible?"display:inline-block;":"display:none;",G=d.date.bold?"font-weight:bold;":"font-weight:normal;",H=d.membername.bold?"font-weight:bold;":"font-weight:normal;",I=d.memberaddress.bold?"font-weight:bold;":"font-weight:normal;",J=d.stationname.bold?"font-weight:bold;":"font-weight:normal;",K=d.stationaddress.bold?"font-weight:bold;":"font-weight:normal;",M=(d.itemtable.bold?"font-weight:bold;":"font-weight:normal;",d.payments.bold?"font-weight:bold;":"font-weight:normal;"),N=d.payments2.bold?"font-weight:bold;":"font-weight:normal;",O=d.payments3.bold?"font-weight:bold;":"font-weight:normal;",P=d.cashier.bold?"font-weight:bold;":"font-weight:normal;",Q=d.remarks.bold?"font-weight:bold;":"font-weight:normal;",R=d.reserved.bold?"font-weight:bold;":"font-weight:normal;",S=d.tdbarcode.bold?"font-weight:bold;":"font-weight:normal;",T=d.tdqty.bold?"font-weight:bold;":"font-weight:normal;",U=d.tddescription.bold?"font-weight:bold;":"font-weight:normal;",V=d.tdprice.bold?"font-weight:bold;":"font-weight:normal;",W=d.tdtotal.bold?"font-weight:bold;":"font-weight:normal;",X=2,Y="",Z=1;Z<=X;Z++){1==Z?(E="display:none;",F="display:none;"):(E=d.tdprice.visible?"display:inline-block;":"display:none;",F=d.tdtotal.visible?"display:inline-block;":"display:none;");var k="";k+="<div id='maindivforprinting' style='page-break-before: always;position:relative;'>&nbsp;",k=k+"<div style='"+p+G+"position:absolute;top:"+d.date.top+"px; left:"+d.date.left+"px;font-size:"+d.date.fontSize+"px;'><br/><br/>"+j+" </div><div style='clear:both;'></div>",k=k+"<div style='"+q+H+"position:absolute;top:"+d.membername.top+"px; left:"+d.membername.left+"px;font-size:"+d.membername.fontSize+"px;'>"+b+"</div>",k=k+"<div style='"+r+I+"position:absolute;top:"+d.memberaddress.top+"px; left:"+d.memberaddress.left+"px;width:"+d.memberaddress.width+"px;font-size:"+d.memberaddress.fontSize+"px;'>"+h+"</div>",k=k+"<div style='"+s+J+"position:absolute;top:"+d.stationname.top+"px; left:"+d.stationname.left+"px;font-size:"+d.stationname.fontSize+"px;'>"+g+"</div>",k=k+"<div style='"+t+K+"position:absolute;top:"+d.stationaddress.top+"px; left:"+d.stationaddress.left+"px;width:"+d.stationaddress.width+"px;font-size:"+d.stationaddress.fontSize+"px;'>"+f+"</div>",k=k+"<table id='itemscon' style='position:absolute;top:"+d.itemtable.top+"px;left:"+d.itemtable.left+"px;font-size:"+d.itemtable.fontSize+"px;'> ";var aa=($("#cart > tbody > tr").length,localStorage.dr_limit),ba=[],ca=1,da=1,ea=0,ha=1.12;aa=parseInt(aa)+1;var ia=a.item_list;for(var n in ia){var ja=ia[n].item_code,ka=ia[n].description,ma=(ia[n].barcode,ia[n].unit_name);ma=ma?ma:"";var na=ia[n].qty+"<span style='margin-left:50px;'>"+ma+"</span>",oa=ia[n].price,pa=ia[n].discount,qa=ia[n].total,ra=qa;if(parseFloat(pa)>0)var sa=parseFloat(pa)/parseFloat(na),ta="<br/>(Disc. "+number_format(sa,2)+")",ua="<br/>("+number_format(pa,2)+")";else var ta="",ua="";if(da%aa==0){var va=ea/ha,wa=parseFloat(ea)-parseFloat(va);va=va.toFixed(2),wa=wa.toFixed(2),ea=ea.toFixed(2),ba[ca]=ba[ca]+"</table>",ba[ca]=ba[ca]+"<div style='"+v+M+"position:absolute; list-style-type: none; left:"+d.payments.left+"px;top:"+d.payments.top+"px;font-size:"+d.payments.fontSize+"px;'>"+va+"</div>",ba[ca]=ba[ca]+"<div style='"+w+N+"position:absolute; list-style-type: none; left:"+d.payments2.left+"px;top:"+d.payments2.top+"px;font-size:"+d.payments2.fontSize+"px;'>"+wa+"</div>",ba[ca]=ba[ca]+"<div style='"+x+O+"position:absolute; list-style-type: none; left:"+d.payments3.left+"px;top:"+d.payments3.top+"px;font-size:"+d.payments3.fontSize+"px;'>"+ea+"</div>",ca=parseInt(ca)+1,ea=0}ea=parseFloat(ea)+parseFloat(qa),ba[ca]=ba[ca]+"<tr ><td style='"+C+T+"position:relative;width:"+d.tdqty.width+"px;padding-left:"+d.tdqty.left+"px;'>"+na+"</td><td style='"+B+S+"position:relative;width:"+d.tdbarcode.width+"px;padding-left:"+d.tdbarcode.left+"px;'>"+ja+"</td><td style='"+D+U+"position:relative;width:"+d.tddescription.width+"px;padding-left:"+d.tddescription.left+"px;'> "+ka+" <span style='padding-left:20px;'>"+ta+"</span> </td><td style='"+E+V+"position:relative;width:"+d.tdprice.width+"px;padding-left:"+d.tdprice.left+"px;'>"+number_format(oa,2)+"</td><td style='"+F+W+"position:relative;width:"+d.tdtotal.width+"px;padding-left:"+d.tdtotal.left+"px;'>"+number_format(ra,2)+" "+ua+"</td></tr>",da=parseInt(da)+1}if(ea>0){var va=ea/ha,wa=parseFloat(ea)-parseFloat(va);va=va.toFixed(2),wa=wa.toFixed(2),ea=ea.toFixed(2),ba[ca]=ba[ca]+"</table>",ba[ca]=ba[ca]+"<div style='"+v+M+"position:absolute; list-style-type: none; left:"+d.payments.left+"px;top:"+d.payments.top+"px;font-size:"+d.payments.fontSize+"px;'>"+va+"</div>",ba[ca]=ba[ca]+"<div style='"+w+N+"position:absolute; list-style-type: none; left:"+d.payments2.left+"px;top:"+d.payments2.top+"px;font-size:"+d.payments2.fontSize+"px;'>"+wa+"</div>",ba[ca]=ba[ca]+"<div style='"+x+O+"position:absolute; list-style-type: none; left:"+d.payments3.left+"px;top:"+d.payments3.top+"px;font-size:"+d.payments3.fontSize+"px;'>"+ea+"</div>"}var xa="",ya="";xa=xa+"<div style='"+y+P+"position:absolute;left:"+d.cashier.left+"px;top:"+d.cashier.top+"px;font-size:"+d.cashier.fontSize+"px;'>"+localStorage.current_lastname+", "+localStorage.current_firstname+"</div>",xa=xa+"<div style='"+z+Q+"position:absolute;left:"+d.remarks.left+"px;top:"+d.remarks.top+"px;font-size:"+d.remarks.fontSize+"px;'>"+e+"</div>",xa=xa+"<div style='"+A+R+"position:absolute;left:"+d.reserved.left+"px;top:"+d.reserved.top+"px;font-size:"+d.reserved.fontSize+"px;'>"+ya+"</div>";var Ba=($("#custom_dr").val(),parseInt(localStorage.dr)+1,""),Ca="",Da="",Ea="",Fa=d.terms.visible?"display:inline-block;":"display:none;",Ga=d.drnum.visible?"display:inline-block;":"display:none;",Ha=d.ponum.visible?"display:inline-block;":"display:none;",Ia=d.tin.visible?"display:inline-block;":"display:none;",Ja=d.drnum.bold?"font-weight:bold;":"font-weight:normal;",Ka=d.terms.bold?"font-weight:bold;":"font-weight:normal;",La=d.ponum.bold?"font-weight:bold;":"font-weight:normal;",Ma=d.tin.bold?"font-weight:bold;":"font-weight:normal;";xa=xa+"<div style='"+Ga+Ja+"position:absolute;left:"+d.drnum.left+"px;top:"+d.drnum.top+"px;font-size:"+d.drnum.fontSize+"px;'>"+Ba+"</div>",xa=xa+"<div style='"+Fa+Ka+"position:absolute;left:"+d.terms.left+"px;top:"+d.terms.top+"px;font-size:"+d.terms.fontSize+"px;'>"+Ca+"</div>",xa=xa+"<div style='"+Ha+La+"position:absolute;left:"+d.ponum.left+"px;top:"+d.ponum.top+"px;font-size:"+d.ponum.fontSize+"px;'>"+Da+"</div>",xa=xa+"<div style='"+Ia+Ma+"position:absolute;left:"+d.tin.left+"px;top:"+d.tin.top+"px;font-size:"+d.tin.fontSize+"px;'>"+Ea+"</div>",xa+="</div>";var Na="";for(var n in ba)Na=Na+k+ba[n]+xa;Na=replaceAll(Na,"undefined",""),Y+="<div>"+Na+"</div>"}this.popUpPrint(Y)},printRackLocation:function(){var a=this.current_order_obj,b=this.current_order_det;console.log(a);var c=new Date,d=c.getMonth()+"/"+c.getDay()+"/"+c.getFullYear(),e="";0!=b.dr?e=b.dr:0!=b.pr&&(e=b.pr);var f="<div class='perpage' style='page-break-after:always;' >";f+="<h3 class='text-center'>"+localStorage.company_name+"</h3>",f+="<p class='text-center text-muted'></p>",f+="<p style='font-size:10px;' class='text-right'>ORDER ID# <span style='width:80px;display:inline-block;margin-left:5px;' class='text-left'>"+this.current_order+"</span></p>",f+="<div style='font-size:10px;'  class=''>",f+="<div class='pull-right'>",f+="<p>Date: <span style='width:270px;display:inline-block;border-bottom: 1px solid #ccc;margin-left:13px;'>"+d+"</span></p>",f+="</div>",f+="<p>Branch: <span style='width:270px;display:inline-block;border-bottom: 1px solid #ccc;margin-left:13px;'>"+b.branch_name+"</span></p>",f+="<div class='pull-right'>",f+="<p>DR: <span style='width:270px;display:inline-block;border-bottom: 1px solid #ccc;margin-left:13px;'>"+e+"</span></p>",f+="</div>",f+="<p>Client: <span style='width:270px;display:inline-block;border-bottom: 1px solid #ccc;margin-left:13px;'>"+b.fullname+"</span></p>",f+="</div>",f+="<p>Remarks: <span style='width:650px;display:inline-block;border-bottom: 1px solid #ccc;margin-left:13px;'>"+b.remarks+"</span></p>",f+="<p>Date Approved: <span style='width:610px;display:inline-block;border-bottom: 1px solid #ccc;margin-left:13px;'>"+b.approved_date+"</span></p>",f+="<hr>",f+="<table  style='font-size:10px;' class='table table-bordered'>",f+="<tr><th>Item</th><th>Quantity</th><th>Racking</th></tr>";var g=[],h=1,i="",j=[],k=[];for(var l in a){var m=a[l].has_serial,n=a[l].item_code,o=a[l].description,q=(a[l].qty,JSON.parse(a[l].racking));if(1==a[l].is_bundle)try{var r=JSON.parse(a[l].bundles);console.log(a[l].bundles);for(var s in r){r[s].description+" - Needed: "+parseFloat(r[s].child_qty)*parseFloat(a[l].qty),parseFloat(r[s].child_qty)*parseFloat(a[l].qty),r[s].rackhtml;try{var w=JSON.parse(r[s].rackjson);for(var x in w)k.push({stock_man:w[x].stock_man,rack:w[x].rack,qty:w[x].qty,item_code:r[s].item_code,description:r[s].description,serial_count:m})}catch(a){console.log("Error")}}}catch(a){}else for(var y in q)q[y].stock_man&&$.inArray(q[y].stock_man,j)!=-1&&j.push(q[y].stock_man),k.push({stock_man:q[y].stock_man,rack:q[y].rack,qty:q[y].qty,item_code:n,description:o,serial_count:m});h%12==0&&(i=""),h+=1}k.sort(this.sortByStockman);var z=1;for(var s in k){i+="<tr><td style='width:250px;'>"+k[s].item_code+"<br><small class='text-danger'>"+k[s].description+"</small></td><td>"+k[s].qty+"</td><td style='width:400px;'>",i+="<div>"+k[s].stock_man+" : "+k[s].rack+"</div>",i+="</td></tr>";var A=parseInt(k[s].serial_count);if(1==A){var B=parseInt(k[s].qty);z+=1;for(var C=1;C<=B;C++)i+="<tr><td colspan='3'>Serial "+C+": </td></tr>",z%12==0&&(g.push(i),i=""),z+=1}else z%12==0&&(g.push(i),i=""),z+=1}var D=Math.ceil(h/12*12);if(h<12){for(;h!=D+1;)i+="<tr style='height:25px;'><td></td><td></td><td></td></tr>",h+=1;g.push(i),i=""}else{for(;h!=D+1;)i+="<tr style='height:25px;'><td></td><td></td><td></td></tr>",h+=1;g.push(i),i=""}var E="</table>",F="";F+="</div>";var G=g.length,H=1,I="";for(var s in g)I+=f,I+=g[s],I+=E,I+="<br><br><div><div class='pull-right'><p  style='font-size:10px;'>Checked By: <span style='width:200px;display:inline-block;border-bottom: 1px solid #ccc;margin-left:13px;'></span></p></div><p  style='font-size:10px;'>Released By: <span style='width:200px;display:inline-block;border-bottom: 1px solid #ccc;margin-left:5px;'></span></p></div>",I+="<p class='text-center' style='color:#ccc;font-size:0.8em;'>Page "+H+" of "+G+"</p>",H+=1,I+=F;this.popUpPrintWithStyle(I)},sortByStockman:function(a,b){var c=a.stock_man.toLowerCase(),d=b.stock_man.toLowerCase();return c<d?-1:c>d?1:0},appendItem:function(){if(this.request.item_id&&this.request.qty){var a=$("#item_id"),b=a.select2("data").is_bundle,c=a.val(),d=a.select2("data").text.split(":"),e=d[3],f=this.request,g=this.items,h=this,i=this.request.member_id,k=(this.request.for_pickup,this.request.qty);if(this.isAlreadyAdded(c))return alertify.alert("Already in cart"),f.item_id="",f.qty="",void a.select2("val",null);$("#btnAdd").attr("disabled",!0),$("#btnAdd").html("Loading..."),$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"getAdjustmentPrice",branch_id:f.branch_id,branch_id_to:f.branch_id_to,shipping_company_id:f.shipping_company_id,item_id:c,member_id:i,qty:k},success:function(i){$("#btnAdd").html("Add Item");var j=i.split(":");if(console.log(parseInt(j[3])),console.log(parseInt(h.order_limit)+"<"+parseInt(j[3])+parseInt(h.cart_item_ctr)),h.request.member_id&&parseInt(h.order_limit)<parseInt(j[3])+parseInt(h.cart_item_ctr))return showToast("error","<p>You already reached the order limit. You can only order 15 items in a single request.</p>","<h3>WARNING!</h3>","toast-bottom-right"),a.select2("val",null),h.disableMemberAndBranch(),f.item_id="",void(f.qty="");if(0==j[2])showToast("error","<p>Invalid quantity.</p>","<h3>WARNING!</h3>","toast-bottom-right"),a.select2("val",null),h.disableMemberAndBranch(),f.item_id="",f.qty="";else{h.cart_item_ctr=parseInt(j[3])+parseInt(h.cart_item_ctr),e=parseFloat(e)+parseFloat(j[0]);var k=j[1];d="<p>"+d[2]+"<small style='display:block' class='text-danger'>"+d[1]+"</small></p>";var l=parseFloat(e)*parseFloat(f.qty);l=parseFloat(l)+parseFloat(k),l=number_format(l,2),g.push({item_id:c,qty:f.qty,item_code:d,price:e.toFixed(2),total:l,adjustmentmem:k,is_bundle:b,item_count:j[3]}),f.item_id="",f.qty="",a.select2("val",null),h.disableMemberAndBranch(),h.success=!0,setTimeout(function(){h.success=!1},3e3);localStorage.wh_backup_items=JSON.stringify(g),localStorage.wh_backup_request=JSON.stringify(f)}},error:function(){alert("It seems like you have a very slow internet connection."),$("#btnAdd").html("Add Item"),h.disableMemberAndBranch()}})}},fetchedOrderPickup:function(){var a=this,b=a.log_from,c=a.log_to,d=a.pickup_filter_type;$.ajax({url:"../ajax/ajax_query2.php",type:"POST",dataType:"json",data:{functionName:"getWhOrderPickup",from:b,to:c,pickup_filter_type:d},success:function(b){a.$set("orders_pickup",b)},error:function(){console.log("Fetched Item")}})},removeItem:function(a){this.cart_item_ctr=parseInt(this.cart_item_ctr)-parseInt(a.item_count),this.items.$remove(a),this.disableMemberAndBranch()},showRequestForm:function(){this.hideAllView(),this.container.requestView=!0},showApproval:function(){this.fetchedOrder(1),this.hideAllView(),this.container.approvalView=!0},showApproved:function(){this.fetchedOrder(3),this.hideAllView(),this.container.showApproved=!0},showShipping:function(){this.fetchedOrder(2),this.hideAllView(),this.container.showShipping=!0},showLog:function(){this.hideAllView(),this.container.showLog=!0,this.fetchedOrderLog()},showPickup:function(){this.hideAllView(),this.container.showPickup=!0,this.fetchedOrderPickup()},hideAllView:function(){this.container.requestView=!1,this.container.approvalView=!1,this.container.showApproved=!1,this.container.showShipping=!1,this.container.showPickup=!1,this.container.showLog=!1},disableMemberAndBranch:function(){this.items.length>0?($("#member_id").select2("disable",!0),$("#branch_id").attr("disabled",!0)):(1!=this.is_member&&$("#member_id").select2("enable",!0),$("#branch_id").attr("disabled",!1))},submitItem:function(){var a=this.items,b=this.request;1!=this.is_member&&$("#member_id").select2("val",null),$("#branch_id").select2("val",null),1!=this.is_member?this.request={member_id:"",branch_id:"",branch_id_to:"",shipping_company_id:"",
	remarks:"",item_id:"",qty:"",client_po:"",for_pickup:0,is_reserve:0}:this.request={member_id:b.member_id,branch_id:"",branch_id_to:"",shipping_company_id:"",remarks:"",item_id:"",qty:"",client_po:"",is_reserve:0},this.items=[],this.disableMemberAndBranch();var c=this;$(".loading").show(),$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"submitWhOrder",items:JSON.stringify(a),request:JSON.stringify(b)},dataType:"json",success:function(a){a.success?(c.orderCount(),tempToast("info","<p>Order was successfully requested</p>","<h4>Information!</h4>")):tempToast("error","<p>Request failed. Please try again.</p>","<h4>Error!</h4>"),localStorage.removeItem("wh_backup_items"),localStorage.removeItem("wh_backup_request"),$(".loading").hide()},error:function(){console.log("Submit item")}})},removeAll:function(){var a=this;alertify.confirm("Are you sure you want to remove all item(s)?",function(b){b&&(a.items=[],a.cart_item_ctr=0)})},isAlreadyAdded:function(a){for(var b in this.items)if(this.items[b].item_id==a)return!0;return!1},fetchedOrder:function(a){var b=this;$.ajax({url:"../ajax/ajax_query2.php",type:"POST",dataType:"json",data:{functionName:"getWhOrders",stat:a},success:function(a){b.$set("orders",a)},error:function(){console.log("Fetched Item")}})},fetchedOrderCur:function(){var a=this,b=a.orders;a.$set("orders",b)},fetchedOrderLog:function(){var a=this,b=a.log_from,c=a.log_to,d=a.del_filter_type;$.ajax({url:"../ajax/ajax_query2.php",type:"POST",dataType:"json",data:{functionName:"getWhOrderLog",from:b,to:c,order_type:d},success:function(b){a.$set("orders_log",b)},error:function(){console.log("Fetched Item")}})},getStocks:function(){var a=this,b=a.current_order,c=$("#btnGetStock"),d=c.html();c.attr("disabled",!0),c.html("Loading..."),$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"getStockWarehouse",order_id:b},success:function(b){tempToast("info","<p>"+b+"</p>","<h4>Information!</h4>"),$("#myModal").modal("hide"),c.attr("disabled",!1),c.html(d),a.fetchedOrder(3)},error:function(){tempToast("error","<p>Error occur. Please try again.</p>","<h4>Error!</h4>")}})},assembleItem:function(){var a=this,b=a.current_order,c=$("#btnAssembleItem");c.html();c.attr("disabled",!0),c.html("Loading..."),localStorage.get_order_id_assemble=b,location.href="assemble-composite-item.php"},processToShipping:function(){var a=this,b=a.current_order,c=$("#btnProcessToShipping"),d=c.html();c.attr("disabled",!0),c.html("Loading..."),$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"processToShipping",order_id:b},success:function(b){tempToast("info","<p>"+b+"</p>","<h4>Information!</h4>"),$("#myModal").modal("hide"),c.attr("disabled",!1),c.html(d),a.fetchedOrder(3),a.orderCount()},error:function(){tempToast("error","<p>Error occur. Please try again.</p>","<h4>Error!</h4>")}})},returnStocks:function(){var a=this,b=a.current_order,c=a.current_order_det,d=$("#btnReturnStocks"),e=d.html();d.attr("disabled",!0),d.html("Loading..."),alertify.confirm("Are you sure you want to return this stocks?",function(f){f?$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"returnStocks",order_id:b},success:function(b){tempToast("info","<p>"+b+"</p>","<h4>Information!</h4>"),$("#myModal").modal("hide"),d.attr("disabled",!1),d.html(e),a.getDetailscomp(c.id,c.status)},error:function(){tempToast("error","<p>Error occur. Please try again.</p>","<h4>Error!</h4>")}}):(d.attr("disabled",!1),d.html(e))})},getOrderDetails:function(a){var b=this;b.current_order_det=a,b.order_updating=0,b.schedule_date="",b.current_order=a.id,b.current_status=a.status,b.current_isScheduled=a.is_scheduled,b.current_stock_out=a.stock_out,console.log("Order id:"+b.current_order+" Status: "+b.current_status+" Stock out: "+b.current_stock_out),b.details_ready=!1,b.rackings=[],$("#myModal").modal("show"),b.getDetailscomp(a.id,a.status)},getDetailscomp:function(a,b){var c=this;$.ajax({url:"../ajax/ajax_query2.php",type:"POST",dataType:"json",data:{functionName:"getWhOrdersDetails",order_id:a,order_status:b},success:function(a){console.log("Order details:");var b=JSON.parse(a.order);c.current_order_obj=b,c.$set("orderDetails",b),c.insufficient=a.ins,console.log(c.insufficient);try{for(var d in b)"[]"==b[d].bundles&&(c.rackings[b[d].item_id]=JSON.parse(b[d].racking))}catch(a){}try{for(var d in b)c.bundles[b[d].item_id]=JSON.parse(b[d].bundles)}catch(a){}c.details_ready=!0},error:function(){}})},showSerialForm:function(a){var b=this,c=b.current_order_det,d=parseInt(a.qty);$.ajax({url:"../ajax/ajax_product.php",type:"POST",data:{functionName:"selectSerials",payment_id:c.payment_id,qty:d,item_id:a.item_id},dataType:"json",success:function(a){console.log(a),b.serials=a},error:function(){}}),$("#myModalSerial").modal("show")},saveSerials:function(){var a=this,b=a.current_order_det;$.ajax({url:"../ajax/ajax_product.php",type:"POST",data:{functionName:"saveSerials",payment_id:b.payment_id,details:JSON.stringify(a.serials)},success:function(c){alertify.alert(c),a.serials=[],$("#myModalSerial").modal("hide"),a.getDetailscomp(b.id,b.status)},error:function(){}})},getOrderDates:function(a){var b=this;b.current_order=a.id,b.current_status=a.status,b.current_isScheduled=a.is_scheduled,b.current_stock_out=a.stock_out,b.current_canBeResched=a.canBeResched,b.current_truck_id=a.truck_id,b.re_truck_id=a.truck_id,b.re_driver_id=a.driverval,b.re_helper_id=a.helperval,console.log("Order id:"+b.current_order+" Status: "+b.current_status+" Stock out: "+b.current_stock_out),b.dates_ready=!1,b.rackings=[],b.re_schedule_date="",$("#myModalDates").modal("show"),$.ajax({url:"../ajax/ajax_query2.php",type:"POST",dataType:"json",data:{functionName:"getWhOrderDates",order_id:a.id,order_status:a.status},success:function(a){b.$set("scheduleDates",a),b.dates_ready=!0},error:function(){}})},approveOrder:function(){var a=this,b=a.current_order;console.log(b),$(".loading").show(),$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"approveWhOrder",order_id:b},dataType:"json",success:function(b){b.success?(tempToast("info","<p>Request approved successfully.</p>","<h4>Information!</h4>"),a.fetchedOrder(1),a.orderCount(),$("#myModal").modal("hide")):tempToast("error","<p>Error updating the request. Please refresh and try again.</p>","<h4>Information!</h4>"),$(".loading").hide()},error:function(){console.log("approveOrder")}})},declineOrder:function(){var a=this,b=a.current_order;$(".loading").show(),$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"declineWhOrder",order_id:b},dataType:"json",success:function(b){b.success?(tempToast("info","<p>Request declined successfully.</p>","<h4>Information!</h4>"),a.fetchedOrder(1),a.orderCount(),$("#myModal").modal("hide")):tempToast("error","<p>Error updating the request. Please refresh and try again.</p>","<h4>Information!</h4>"),$(".loading").hide()},error:function(){console.log("approveOrder")}})},toggleReserve:function(){var a=this,b=a.current_order;$(".loading").show(),$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"toggleReserveWhOrder",order_id:b},dataType:"json",success:function(b){b.success?(tempToast("info","<p>Request sent successfully.</p>","<h4>Information!</h4>"),a.fetchedOrder(1),$("#myModal").modal("hide")):tempToast("error","<p>Error updating the request. Please refresh and try again.</p>","<h4>Information!</h4>"),$(".loading").hide()},error:function(){console.log("approveOrder")}})},togglePriorityOrder:function(){var a=this,b=a.current_order;$(".loading").show(),$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"togglePriorityOrder",order_id:b},dataType:"json",success:function(b){b.success?(tempToast("info","<p>Request updated successfully.</p>","<h4>Information!</h4>"),a.fetchedOrder(1),$("#myModal").modal("hide")):tempToast("error","<p>Error updating the request. Please refresh and try again.</p>","<h4>Information!</h4>"),$(".loading").hide()},error:function(){console.log("approveOrder")}})}}});$("#branch_id").on("change",function(){vm.request.branch_id=$(this).val()}),vm.$watch("request.branch_id",function(a){$("#branch_id").select2({placeholder:"From",allowClear:!0})}),$("#branch_id_to").on("change",function(){vm.request.branch_id_to=$(this).val()}),vm.$watch("request.branch_id_to",function(a){$("#branch_id_to").select2({placeholder:"To",allowClear:!0})}),$("#shipping_company_id").on("change",function(){vm.request.shipping_company_id=$(this).val()}),vm.$watch("request.shipping_company_id",function(a){$("#shipping_company_id").select2({placeholder:"Shipping Company",allowClear:!0})}),vm.$watch("helper_id",function(a){$("#helper_id").select2({placeholder:"Select Helper",allowClear:!0})}),$("#helper_id").on("change",function(){vm.helper_id=$(this).val()}),$("#member_id").on("change",function(){vm.request.member_id=$(this).val()}),vm.$watch("request.member_id",function(a){}),vm.$watch("schedule_date",function(a){$("#schedule_date").datepicker({autoclose:!0}).on("changeDate",function(a){$("#schedule_date").datepicker("hide")})}),$("#schedule_date").datepicker({autoclose:!0}).on("changeDate",function(a){$("#schedule_date").datepicker("hide"),vm.schedule_date=$("#schedule_date").val()}),$("#custom_date").datepicker({autoclose:!0}).on("changeDate",function(a){$("#custom_date").datepicker("hide")}),vm.$watch("log_from",function(a){$("#log_from").datepicker({autoclose:!0}).on("changeDate",function(a){$("#log_from").datepicker("hide")})}),$("#log_from").datepicker({autoclose:!0}).on("changeDate",function(a){$("#log_from").datepicker("hide"),vm.log_from=$("#log_from").val()}),vm.$watch("log_to",function(a){$("#log_to").datepicker({autoclose:!0}).on("changeDate",function(a){$("#log_to").datepicker("hide")})}),$("#log_to").datepicker({autoclose:!0}).on("changeDate",function(a){$("#log_to").datepicker("hide"),vm.log_to=$("#log_to").val()}),vm.$watch("re_schedule_date",function(a){$("#re_schedule_date").datepicker({autoclose:!0}).on("changeDate",function(a){$("#re_schedule_date").datepicker("hide")})}),$("#re_schedule_date").datepicker({autoclose:!0}).on("changeDate",function(a){$("#re_schedule_date").datepicker("hide"),vm.re_schedule_date=$("#re_schedule_date").val()}),function(a){function c(a,b){$("#con_member").empty(),$("#con_member").append("<option></option>"),$("#con_member_freebies").empty(),$("#con_member_freebies").append("<option></option>"),$("#member_credit").empty(),$("#member_credit").append("<option></option>"),$("#member_deduction").empty(),$("#member_deduction").append("<option></option>"),$.ajax({url:"../ajax/ajax_get_members.php",type:"POST",data:{company_id:a,member_id:b,type:1},success:function(a){if(0!=a){var c=JSON.parse(a);for(var d in c){var e=0,f=0;if(c[d].amt){var g=0;e=c[d].amt,c[d].camt&&(g=c[d].camt),e-=g,$("#con_member").append("<option data-con='"+e+"' value='"+c[d].id+"'>"+c[d].lastname+", "+c[d].firstname+" "+c[d].middlename+" ("+e+")</option>")}c[d].freebiesamount&&(f=c[d].freebiesamount),$("#con_member_freebies").append("<option data-con_freebies='"+f+"' value='"+c[d].id+"'>"+c[d].lastname+", "+c[d].firstname+" "+c[d].middlename+" ("+f+")</option>"),$("#member_credit").append("<option value='"+c[d].id+"'>"+c[d].lastname+", "+c[d].firstname+" "+c[d].middlename+"</option>"),$("#member_deduction").append("<option value='"+c[d].id+"'>"+c[d].lastname+", "+c[d].firstname+" "+c[d].middlename+"</option>")}$("#con_member_freebies").select2("val",b),$("#member_credit").select2("val",b),$("#con_member").select2("val",b),$("#member_deduction").select2("val",b),$("#con_member_freebies").attr("disabled",!0),$("#member_credit").attr("disabled",!0),$("#con_member").attr("disabled",!0),$("#member_deduction").attr("disabled",!0)}}})}function f(){var c=$(".cashreceiveok"),d=c.html();c.attr("disabled",!0),c.html("Loading...");var e=$("#hidcashpayment").val();e||(e=0);var f=$("#hidcreditpayment").val();f||(f=0);var h=$("#hidbanktransferpayment").val();h||(h=0);var i=$("#hidchequepayment").val();i||(i=0);var j=$("#hidconsumablepayment").val();j||(j=0);var k=$("#hidconsumablepaymentfreebies").val();k||(k=0);var l=$("#hidmembercredit").val(),m=$("#hidmemberdeduction").val();m||(m=0),l||(l=0);var n=$("#member_credit_cod").is(":checked");n=n?1:0;var o=parseFloat(e)+parseFloat(f)+parseFloat(h)+parseFloat(i)+parseFloat(j)+parseFloat(k)+parseFloat(l)+parseFloat(m),p=parseFloat($("#hidamountdue").val());if(parseFloat(o)<0||parseFloat(o)<parseFloat(p))return g(0,0),showToast("error","<p>Invalid payment</p>","<h3>WARNING!</h3>","toast-bottom-right"),c.attr("disabled",!1),void c.html(d);if(!u()||!v()||!w())return c.attr("disabled",!1),void c.html(d);var q=parseFloat(o)-parseFloat(p);e=parseFloat(e)-parseFloat(q),localStorage.payment_cash=e,localStorage.payment_con=j,localStorage.payment_con_freebies=k,localStorage.payment_member_credit=l,localStorage.payment_member_deduction=m,alertify.confirm("Are you sure you want to submit this payment?",function(e){if(e){var f,g,h,i,j,k,l,m,o,p=$("#payment_order_id").val();if(localStorage.payment_cash&&(i=localStorage.payment_cash),localStorage.payment_con&&(k=localStorage.payment_con),localStorage.payment_con_freebies&&(j=localStorage.payment_con_freebies),localStorage.payment_member_credit&&(l=localStorage.payment_member_credit),localStorage.payment_credit&&(f=localStorage.payment_credit),localStorage.payment_bt&&(g=localStorage.payment_bt),localStorage.payment_cheque&&(h=localStorage.payment_cheque),localStorage.payment_member_deduction&&(m=localStorage.payment_member_deduction,o=$("#member_deduction_remarks").val()),b)return;b=!0,$.ajax({url:"../ajax/ajax_query2.php",type:"POST",data:{functionName:"sendPaymentWh",payment_credit:f,payment_bt:g,payment_cheque:h,payment_cash:i,payment_con:k,payment_con_freebies:j,payment_member_credit:l,member_credit_cod:n,payment_member_deduction:m,member_deduction_remarks:o,order_id:p,terminal_id:localStorage.terminal_id},success:function(e){b=!1,tempToast("info","<p>"+e+"</p>","<h4>Information!</h4>"),c.attr("disabled",!1),c.html(d),a.printGroup(p),a.fetchedOrder(1)},error:function(){b=!1,tempToast("error","<p>Error Occur. Please try again.</p>","<h4>Error!</h4>"),c.attr("disabled",!1),c.html(d),a.fetchedOrder(1)}}),$("#credit_table").find("tr").remove(),$("#bt_table").find("tr").remove(),$("#ch_table").find("tr").remove(),$("#tab_d :input[type='text']").val(""),$("#tab_c :input[type='text']").val(""),$("#tab_b :input[type='text']").val(""),$("#tab_a :input[type='text']").val(""),$("#getpricemodal").modal("hide")}else c.attr("disabled",!1),c.html(d)})}function g(a,b){$("#cashreceiveholder").empty(),$("#changeholder").empty(),$("#cashreceiveholder").append(number_format(a,2)),$("#changeholder").append(number_format(b,2))}function h(){var a=$("#cashreceivetext").val();a||(a=0);var b=$("#con_amount").val();b||(b=0);var c=$("#con_amount_freebies").val();c||(c=0);var d=$("#member_credit_amount").val();d||(d=0);var e=$("#member_deduction_amount").val();e||(e=0);var f=$("#hidcreditpayment").val();f||(f=0);var g=$("#hidbanktransferpayment").val();g||(g=0);var h=$("#hidchequepayment").val();h||(h=0);var i=parseFloat(a)+parseFloat(b)+parseFloat(c)+parseFloat(d)+parseFloat(f)+parseFloat(g)+parseFloat(h)+parseFloat(e);$("#totalOfAllPayment").html("<strong><span style='font-size:1.2em;' class='text-info' >Total Payment: "+i.toFixed(2)+"</span></strong>")}function i(){var a=$("#cashreceivetext").val();a||(a=0),$("#totalcashpayment").html(a),h()}function j(){var a=$("#con_amount").val();a||(a=0),$("#totalconsumablepayment").html(a),h()}function k(){var a=$("#member_credit_amount").val();a||(a=0),$("#totalmembercredit").html(a),h()}function l(){var a=$("#member_deduction_amount").val();a||(a=0),$("#totalmemberdeduction").html(a),h()}function m(){var a=$("#con_amount_freebies").val();a||(a=0),$("#totalconsumablepaymentfreebies").html(a),h()}function n(){var a=0;$("#credit_table tr").children().length&&$("#credit_table tr").each(function(b){var c=$(this),d=c.children().eq(1).text();a=parseFloat(a)+parseFloat(d)}),$("#totalcreditpayment").html(a),$("#hidcreditpayment").val(a),h()}function o(){var a=0;$("#bt_table tr").children().length&&$("#bt_table tr").each(function(b){var c=$(this),d=c.children().eq(1).text();a=parseFloat(a)+parseFloat(d)}),$("#totalbanktransferpayment").html(a),$("#hidbanktransferpayment").val(a),h()}function p(){var a=0;$("#ch_table tr").children().length&&$("#ch_table tr").each(function(b){var c=$(this),d=c.children().eq(2).text();a=parseFloat(a)+parseFloat(d)}),$("#totalchequepayment").html(a),$("#hidchequepayment").val(a),h()}function q(a){$("#credit_table tr").children().length||(showToast("error","<p>Please Add Credit Card First. </p>","<h3>WARNING!</h3>","toast-bottom-right"),a.val(""))}function r(a){$("#bt_table tr").children().length||(showToast("error","<p>Please Add Bank Transfer Data First. </p>","<h3>WARNING!</h3>","toast-bottom-right"),a.val(""))}function s(a){$("#ch_table tr").children().length||(showToast("error","<p>Please Add Cheque Data First. </p>","<h3>WARNING!</h3>","toast-bottom-right"),a.val(""))}function t(a,b){var c=$("#hidcashpayment").val();c||(c=0);var d=$("#hidcreditpayment").val();d||(d=0);var e=$("#hidbanktransferpayment").val();e||(e=0);var f=$("#hidchequepayment").val();f||(f=0);var g=$("#hidconsumablepayment").val();g||(g=0);var h=$("#hidconsumablepaymentfreebies").val();h||(h=0);var i=$("#hidmembercredit").val();i||(i=0);var j=$("#hidmemberdeduction").val();j||(j=0);var k=parseFloat($("#hidamountdue").val()),l=parseFloat(d)+parseFloat(e)+parseFloat(f)+parseFloat(g)+parseFloat(h)+parseFloat(i)+parseFloat(j);return b&&(l=parseFloat(l)+parseFloat(a)),parseFloat(l).toFixed(2)>parseFloat(k)}function u(){if($("#ch_table tr").children().length){var a=new Array,b=$("#ch_firstname").val(),c=$("#ch_middlename").val(),d=$("#ch_lastname").val(),e=$("#ch_phone").val();return b&&!x(b)?(showToast("error","<p>First name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):c&&!x(c)?(showToast("error","<p>Middle name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):d&&!x(d)?(showToast("error","<p>Last name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):e&&!x(e)?(showToast("error","<p>Phone should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):($("#ch_table tr").each(function(f){var g=$(this);a[f]={date:g.children().eq(0).text(),cheque_number:g.children().eq(1).text(),amount:g.children().eq(2).text(),bank_name:g.children().eq(3).text(),firstname:b,lastname:d,middlename:c,phone:e}}),localStorage.payment_cheque=JSON.stringify(a),!0)}return!0}function v(){if($("#credit_table tr").children().length){var a=new Array,b=$("#billing_firstname").val(),c=$("#billing_middlename").val(),d=$("#billing_lastname").val(),e=$("#billing_company").val(),f=$("#billing_address").val(),g=$("#billing_postal").val(),h=$("#billing_phone").val(),i=$("#billing_email").val(),j=$("#billing_remarks").val(),k=$("#billing_card_type").val(),l=$("#billing_trace_number").val(),m=$("#billing_approval_code").val(),n=$("#billing_date").val();return k&&l&&m&&n?d&&!x(d)?(showToast("error","<p>Last name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):b&&!x(b)?(showToast("error","<p>First name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):c&&!x(c)?(showToast("error","<p>Middle name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):e&&!x(e)?(showToast("error","<p>Company should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):f&&!x(f)?(showToast("error","<p>Address should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):g&&!z(g)?(showToast("error","<p>Postal should be numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):h&&!x(h)?(showToast("error","<p>Phone should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):i&&!A(i)?(showToast("error","<p>Email should be valid email address</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):j&&!x(j)?(showToast("error","<p>Remarks should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):($("#credit_table tr").each(function(o){var p=$(this);a[o]={credit_number:p.children().eq(0).text(),amount:p.children().eq(1).text(),bank_name:p.children().eq(2).text(),firstname:b,lastname:d,middlename:c,phone:h,comp:e,add:f,postal:g,email:i,remarks:j,card_type:k,trace_number:l,approval_code:m,date:n}}),localStorage.payment_credit=JSON.stringify(a),!0):(showToast("error","<p>Please Complete Credit Card billing form. </p>","<h3>WARNING!</h3>","toast-bottom-right"),!1)}return!0}function w(){if($("#bt_table tr").children().length){var a=new Array,b=$("#bt_bankto_name").val(),c=$("#bt_bankto_account_number").val(),d=$("#bt_firstname").val(),e=$("#bt_middlename").val(),f=$("#bt_lastname").val(),g=$("#bt_company").val(),h=$("#bt_address").val(),i=$("#bt_postal").val(),j=$("#bt_phone").val(),k=$("#bt_date").val();return k?b&&!x(b)?(showToast("error","<p>Bank name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):c&&!x(c)?(showToast("error","<p>Bank account number should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):d&&!x(d)?(showToast("error","<p>First name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):e&!x(e)?(showToast("error","<p>Middle name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):f&&!x(f)?(showToast("error","<p>Last name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):g&&!x(g)?(showToast("error","<p>Company should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):h&&!x(h)?(showToast("error","<p>Address should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):i&&!z(i)?(showToast("error","<p>Phone should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):j&&!x(j)?(showToast("error","<p>Phone should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):($("#bt_table tr").each(function(l){var m=$(this);a[l]={credit_number:m.children().eq(0).text(),amount:m.children().eq(1).text(),bank_name:m.children().eq(2).text(),bt_bankto_name:b,bt_bankto_account_number:c,firstname:d,lastname:f,middlename:e,phone:j,comp:g,add:h,postal:i,date:k}}),localStorage.payment_bt=JSON.stringify(a),!0):(showToast("error","<p>Please Bank Transfer  billing form. </p>","<h3>WARNING!</h3>","toast-bottom-right"),!1)}return!0}function x(a){var b=/^[\w\-\s\.,??]+$/;return!!b.test(a)}function y(a){var b=/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/;return b.test(a)}function z(a){var b=/^[0-9]+$/;return!!b.test(a)}function A(a){var b=/^[\w\.-_\+]+@[\w-]+(\.\w{2,3})+$/;return!!b.test(a)}function B(a,b){a?localStorage.totalforfreebies=a:localStorage.totalforfreebies=0,localStorage.removeItem("payment_cheque"),localStorage.removeItem("payment_credit"),localStorage.removeItem("payment_bt"),localStorage.removeItem("payment_cash"),localStorage.removeItem("payment_con"),localStorage.removeItem("payment_con_freebies"),localStorage.removeItem("payment_member_credit"),$("#cashreceiveholder").text(0),$("#changeholder").text(0),$("#con_amount_freebies").val(""),$("#con_amount").val(""),$("#member_credit_amount").val(""),n(),i(),o(),p(),j(),m(),k(),l(),$("#amountdue").html("<span style='font-size:1.2em;' class='text-info'><strong> Amount Due: "+b+"</strong></span>"),$("#hidamountdue").val(replaceAll(b,",","")),$("#getpricemodal").modal("show"),setTimeout(function(){$("#cashreceivetext").focus()},500)}function C(){var a=$("#op_cashreceivetext").val();a||(a=0);var b=$("#op_hidcreditpayment").val();b||(b=0);var c=$("#op_hidbanktransferpayment").val();c||(c=0);var d=$("#op_hidchequepayment").val();d||(d=0);var e=parseFloat(a)+parseFloat(b)+parseFloat(c)+parseFloat(d);$("#op_totalOfAllPayment").html("<strong><span style='font-size:1.2em;' class='text-info' >Total Over Payment: "+e.toFixed(2)+"</span></strong>")}function D(){var a=$("#op_cashreceivetext").val();a||(a=0),$("#op_totalcashpayment").html(a),C()}function E(){var a=0;$("#op_credit_table tr").children().length&&$("#op_credit_table tr").each(function(b){var c=$(this),d=c.children().eq(1).text();a=parseFloat(a)+parseFloat(d)}),$("#op_totalcreditpayment").html(a),$("#op_hidcreditpayment").val(a),C()}function F(){var a=0;$("#op_bt_table tr").children().length&&$("#op_bt_table tr").each(function(b){var c=$(this),d=c.children().eq(1).text();a=parseFloat(a)+parseFloat(d)}),$("#op_totalbanktransferpayment").html(a),$("#op_hidbanktransferpayment").val(a),C()}function G(){var a=0;$("#op_ch_table tr").children().length&&$("#op_ch_table tr").each(function(b){var c=$(this),d=c.children().eq(2).text();a=parseFloat(a)+parseFloat(d)}),$("#op_totalchequepayment").html(a),$("#op_hidchequepayment").val(a),C()}function H(){if($("#op_ch_table tr").children().length){var a=new Array,b=$("#op_ch_firstname").val(),c=$("#op_ch_middlename").val(),d=$("#op_ch_lastname").val(),e=$("#op_ch_phone").val();return b&&!x(b)?(showToast("error","<p>First name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):c&&!x(c)?(showToast("error","<p>Middle name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):d&&!x(d)?(showToast("error","<p>Last name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):e&&!x(e)?(showToast("error","<p>Phone should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):($("#op_ch_table tr").each(function(f){var g=$(this);a[f]={date:g.children().eq(0).text(),cheque_number:g.children().eq(1).text(),amount:g.children().eq(2).text(),bank_name:g.children().eq(3).text(),firstname:b,lastname:d,middlename:c,phone:e}}),localStorage.op_payment_cheque=JSON.stringify(a),!0)}return!0}function I(){if($("#op_credit_table tr").children().length){var a=new Array,b=$("#op_billing_firstname").val(),c=$("#op_billing_middlename").val(),d=$("#op_billing_lastname").val(),e=$("#op_billing_company").val(),f=$("#op_billing_address").val(),g=$("#op_billing_postal").val(),h=$("#op_billing_phone").val(),i=$("#op_billing_email").val(),j=$("#op_billing_remarks").val(),k=$("#op_billing_card_type").val(),l=$("#op_billing_trace_number").val(),m=$("#op_billing_approval_code").val(),n=$("#op_billing_date").val();return k&&l&&m&&n?d&&!x(d)?(showToast("error","<p>Last name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):b&&!x(b)?(showToast("error","<p>First name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):c&&!x(c)?(showToast("error","<p>Middle name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):e&&!x(e)?(showToast("error","<p>Company should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):f&&!x(f)?(showToast("error","<p>Address should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):g&&!z(g)?(showToast("error","<p>Postal should be numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):h&&!x(h)?(showToast("error","<p>Phone should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):i&&!A(i)?(showToast("error","<p>Email should be valid email address</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):j&&!x(j)?(showToast("error","<p>Remarks should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):($("#op_credit_table tr").each(function(o){var p=$(this);a[o]={credit_number:p.children().eq(0).text(),amount:p.children().eq(1).text(),bank_name:p.children().eq(2).text(),firstname:b,lastname:d,middlename:c,phone:h,comp:e,add:f,postal:g,email:i,remarks:j,card_type:k,trace_number:l,approval_code:m,date:n}}),localStorage.op_payment_credit=JSON.stringify(a),!0):(showToast("error","<p>Please Complete Credit Card billing form. </p>","<h3>WARNING!</h3>","toast-bottom-right"),!1)}return!0}function J(){if($("#op_bt_table tr").children().length){var a=new Array,b=$("#op_bt_bankto_name").val(),c=$("#op_bt_bankto_account_number").val(),d=$("#op_bt_firstname").val(),e=$("#op_bt_middlename").val(),f=$("#op_bt_lastname").val(),g=$("#op_bt_company").val(),h=$("#op_bt_address").val(),i=$("#op_bt_postal").val(),j=$("#op_bt_phone").val(),k=$("#op_bt_date").val();return k?b&&!x(b)?(showToast("error","<p>Bank name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):c&&!x(c)?(showToast("error","<p>Bank account number should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):d&&!x(d)?(showToast("error","<p>First name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):e&!x(e)?(showToast("error","<p>Middle name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):f&&!x(f)?(showToast("error","<p>Last name should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):g&&!x(g)?(showToast("error","<p>Company should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):h&&!x(h)?(showToast("error","<p>Address should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):i&&!z(i)?(showToast("error","<p>Phone should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):j&&!x(j)?(showToast("error","<p>Phone should have letters and numbers only</p>","<h3>WARNING!</h3>","toast-bottom-right"),!1):($("#op_bt_table tr").each(function(l){var m=$(this);a[l]={credit_number:m.children().eq(0).text(),amount:m.children().eq(1).text(),bank_name:m.children().eq(2).text(),bt_bankto_name:b,bt_bankto_account_number:c,firstname:d,lastname:f,middlename:e,phone:j,comp:g,add:h,postal:i,date:k}}),localStorage.op_payment_bt=JSON.stringify(a),!0):(showToast("error","<p>Please Bank Transfer  billing form. </p>","<h3>WARNING!</h3>","toast-bottom-right"),!1)}return!0}function K(){var a=$("#op_hidcashpayment").val();a||(a=0);var b=$("#op_hidcreditpayment").val();b||(b=0);var c=$("#op_hidbanktransferpayment").val();c||(c=0);var d=$("#op_hidchequepayment").val();d||(d=0);var e=parseFloat(a)+parseFloat(b)+parseFloat(c)+parseFloat(d);if(e){if(!H()||!I()||!J())return;var f=0;a=parseFloat(a)-parseFloat(f),localStorage.op_payment_cash=a;var g,h,i,j;localStorage.op_payment_cash&&(j=localStorage.op_payment_cash),localStorage.op_payment_credit&&(g=localStorage.op_payment_credit),localStorage.op_payment_bt&&(h=localStorage.op_payment_bt),localStorage.op_payment_cheque&&(i=localStorage.op_payment_cheque),$("#op_credit_table").find("tr").remove(),$("#op_bt_table").find("tr").remove(),$("#op_ch_table").find("tr").remove(),$("#over_payment_b :input[type='text']").val(""),$("#over_payment_c :input[type='text']").val(""),$("#over_payment_d :input[type='text']").val(""),$("#over_payment_a :input[type='text']").val(""),$("#op_label_holder").show(),$("#op_grandtotalholder").html(number_format(e,2)),$("#modalOverPayment").modal("hide"),$.ajax({url:"../ajax/ajax_wh_order.php",type:"POST",data:{functionName:"saveOverPaymentOrder"},success:function(a){},error:function(){}})}}var b=!1;$("body").on("click",".opennewtabimage",function(){var a=$(this).attr("src");$.swipebox([{href:a,title:""}])}),$("#con_member").select2({placeholder:"Choose member name...",allowClear:!0}).on("select2-open",function(){}).on("select2-close",function(a){setTimeout(function(){$(".select2-container-active").removeClass("select2-container-active"),$(":focus").blur()},100)}),$("#con_member_freebies").select2({placeholder:"Choose member name...",allowClear:!0
}).on("select2-open",function(){}).on("select2-close",function(a){setTimeout(function(){$(".select2-container-active").removeClass("select2-container-active"),$(":focus").blur()},100)}),$("#member_credit").select2({placeholder:"Choose member name...",allowClear:!0}),$("#member_deduction").select2({placeholder:"Choose member name...",allowClear:!0}),$(".cashreceivecancel").click(function(){$("#getpricemodal").modal("hide"),$("#credit_table").find("tr").remove(),$("#bt_table").find("tr").remove(),$("#ch_table").find("tr").remove(),$("#tab_d :input[type='text']").val(""),$("#tab_c :input[type='text']").val(""),$("#tab_b :input[type='text']").val(""),$("#tab_a :input[type='text']").val(""),localStorage.removeItem("payment_cheque"),localStorage.removeItem("payment_credit"),localStorage.removeItem("payment_bt"),localStorage.removeItem("payment_cash"),localStorage.removeItem("payment_con"),localStorage.removeItem("payment_con_freebies"),localStorage.removeItem("payment_member_credit"),localStorage.removeItem("payment_member_deduction")}),$("body").on("click",".cashreceiveok",function(){f()}),$("#ch_date").datepicker({autoclose:!0}).on("changeDate",function(a){$("#ch_date").datepicker("hide")}),$("#billing_date").datepicker({autoclose:!0}).on("changeDate",function(a){$("#billing_date").datepicker("hide")}),$("#bt_date").datepicker({autoclose:!0}).on("changeDate",function(a){$("#bt_date").datepicker("hide")}),$("#billing_firstname, #billing_middlename, #billing_lastname, #billing_company, #billing_address, #billing_postal,#billing_phone,#billing_email,#billing_remarks").keyup(function(){q($(this))}),$("#bt_bankto_name, #bt_bankto_account_number, #bt_firstname, #bt_middlename, #bt_lastname, #bt_company,#bt_address,#bt_postal,#bt_phone").keyup(function(){r($(this))}),$("#ch_firstname, #ch_middlename, #ch_lastname, #ch_phone").keyup(function(){s($(this))}),$("#cashreceivetext").keypress(function(a){var b=a.which;13==b&&(f(),$("#cashreceivetext").val(""),$("#getpricemodal").modal("hide"))}),$("#cashreceivetext").keyup(function(a){isNaN($(this).val())&&(showToast("error","<p>Please Enter Valid Amount</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).val(""),$(this).focus()),$("#hidcashpayment").val($(this).val()),i()}),$("#addcreditcard").click(function(){var a=$("#billing_cardnumber").val(),b=$("#billing_bankname").val(),c=$("#billing_amount").val();return a?c?isNaN(c)?void showToast("error","<p>Please indicate a valid amount</p>","<h3>WARNING!</h3>","toast-bottom-right"):b?t(c,!0)?void showToast("error","<p>Your payment exceeds to amount due.</p>","<h3>WARNING!</h3>","toast-bottom-right"):($("#credit_table").append("<tr><td>"+a+"</td><td>"+c+"</td><td>"+b+"</td><td><span  class='glyphicon glyphicon-remove-sign removeItem'></span></td></tr>"),$("#billing_cardnumber").val(""),$("#billing_bankname").val(""),$("#billing_amount").val(""),void n()):void showToast("error","<p>Please indicate bank name</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate amount</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate card number</p>","<h3>WARNING!</h3>","toast-bottom-right")}),$("body").on("click",".removeItem",function(){$(this).parents("tr").remove();n(),i(),j(),o(),p()}),$("#addbanktransfer").click(function(){var a=$("#bankfrom_account_number").val(),b=$("#bankfrom_name").val(),c=$("#bt_amount").val();return a?c?isNaN(c)?void showToast("error","<p>Please indicate a valid amount</p>","<h3>WARNING!</h3>","toast-bottom-right"):parseFloat(c)<1?void showToast("error","<p>Amount should be greater than Zero</p>","<h3>WARNING!</h3>","toast-bottom-right"):b?t(c,!0)?void showToast("error","<p>Your payment exceeds to amount due.</p>","<h3>WARNING!</h3>","toast-bottom-right"):($("#bt_table").append("<tr><td>"+a+"</td><td>"+c+"</td><td>"+b+"</td><td><span  class='glyphicon glyphicon-remove-sign removeItem'></span></td></tr>"),$("#bankfrom_account_number").val(""),$("#bankfrom_name").val(""),$("#bt_amount").val(""),void o()):void showToast("error","<p>Please indicate bank name</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate amount</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate card number</p>","<h3>WARNING!</h3>","toast-bottom-right")}),$("#addcheque").click(function(){var a=$("#ch_date").val(),b=$("#ch_number").val(),c=$("#ch_amount").val(),d=$("#ch_bankname").val();return a?b?c?y(a)?isNaN(c)?void showToast("error","<p>Please indicate a valid amount</p>","<h3>WARNING!</h3>","toast-bottom-right"):parseFloat(c)<1?void showToast("error","<p>Amount should be greater than Zero</p>","<h3>WARNING!</h3>","toast-bottom-right"):d?t(c,!0)?void showToast("error","<p>Your payment exceeds to amount due.</p>","<h3>WARNING!</h3>","toast-bottom-right"):($("#ch_table").append("<tr><td>"+a+"</td><td>"+b+"</td><td>"+c+"</td><td>"+d+"</td><td><span  class='glyphicon glyphicon-remove-sign removeItem'></span></td></tr>"),$("#ch_date").val(""),$("#ch_number").val(""),$("#ch_amount").val(""),$("#ch_bankname").val(""),void p()):void showToast("error","<p>Please indicate bank name</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Invalid Date Format. It should be mm/dd/yyyy (Ex. 01/01/2014) </p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate amount</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate card number</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate date</p>","<h3>WARNING!</h3>","toast-bottom-right")}),$("#con_amount_freebies").keyup(function(a){if(!$("#con_member_freebies").val())return void showToast("error","<p>Please Choose member first</p>","<h3>WARNING!</h3>","toast-bottom-right");var b=$("#con_member_freebies option:selected").attr("data-con_freebies"),c=parseFloat(localStorage.totalforfreebies);parseFloat($(this).val())>c&&(showToast("error","<p>Invalid freebies amount</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).focus(),$(this).val("")),parseFloat(b)<parseFloat($(this).val())&&(showToast("error","<p>Invalid freebies amount</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).focus(),$(this).val("")),isNaN($(this).val())&&(showToast("error","<p>Please Enter Valid Amount</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).val(""),$(this).focus()),$("#hidconsumablepaymentfreebies").val($(this).val()),t($(this).val(),!1)&&(showToast("error","<p>Your payment exceeds to amount due.</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).val("")),$("#hidconsumablepaymentfreebies").val($(this).val()),m()}),$("#member_credit_amount").keyup(function(a){return $("#member_credit").val()?(isNaN($(this).val())&&(showToast("error","<p>Please Enter Valid Amount</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).val(""),$(this).focus()),$("#hidmembercredit").val($(this).val()),t($(this).val(),!1)&&(showToast("error","<p>Your payment exceeds to amount due.</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).val("")),$("#hidmembercredit").val($(this).val()),void k()):(showToast("error","<p>Please Choose member first</p>","<h3>WARNING!</h3>","toast-bottom-right"),void $(this).val(""))}),$("#member_deduction_amount").keyup(function(a){return $("#member_deduction").val()?(isNaN($(this).val())&&(showToast("error","<p>Please Enter Valid Amount</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).val(""),$(this).focus()),$("#hidmemberdeduction").val($(this).val()),t($(this).val(),!1)&&(showToast("error","<p>Your payment exceeds to amount due.</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).val("")),$("#hidmemberdeduction").val($(this).val()),void l()):(showToast("error","<p>Please Choose member first</p>","<h3>WARNING!</h3>","toast-bottom-right"),void $(this).val(""))}),$("#con_amount").keyup(function(a){if(!$("#con_member").val())return void showToast("error","<p>Please Choose member first</p>","<h3>WARNING!</h3>","toast-bottom-right");if(1==localStorage.hasType2){var b=$("#con_member option:selected").text(),c=$("#con_member").val();removeMemberDetails(),$("#membersIdHelper").append("Member Id: "),$("#memberId").append(c),$("#membersnameHelper").append("Name: "),$("#membersname").append(b),localStorage.removeItem("temp_item_holder")}var d=$("#con_member option:selected").attr("data-con");parseFloat(d)<parseFloat($(this).val())&&(showToast("error","<p>Invalid consumable amount</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).focus(),$(this).val("")),isNaN($(this).val())&&(showToast("error","<p>Please Enter Valid Amount</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).val(""),$(this).focus()),$("#hidconsumablepayment").val($(this).val()),t($(this).val(),!1)&&(showToast("error","<p>Your payment exceeds to amount due.</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).val("")),$("#hidconsumablepayment").val($(this).val()),j()}),$("body").on("click",".btnPayment",function(a){a.preventDefault();var b=$(this).parents("tr"),d=b.attr("data-total"),e=b.attr("data-id"),f=$(this).attr("data-member_id");c(localStorage.company_id,f),$("#payment_order_id").val(e),B("0",d.toString())}),$("body").on("click","#btnOverPayment",function(){localStorage.removeItem("op_payment_cheque"),localStorage.removeItem("op_payment_credit"),localStorage.removeItem("op_payment_bt"),localStorage.removeItem("op_payment_cash"),E(),D(),F(),G(),$("#op_label_holder").hide(),$("#modalOverPayment").modal("show")}),$("#op_cashreceivetext").keyup(function(a){isNaN($(this).val())&&(showToast("error","<p>Please Enter Valid Amount</p>","<h3>WARNING!</h3>","toast-bottom-right"),$(this).val(""),$(this).focus()),$("#op_hidcashpayment").val($(this).val()),D()}),$("#op_addcreditcard").click(function(){var a=$("#op_billing_cardnumber").val(),b=$("#op_billing_bankname").val(),c=$("#op_billing_amount").val();return a||(a="N/A"),c?isNaN(c)?void showToast("error","<p>Please indicate a valid amount</p>","<h3>WARNING!</h3>","toast-bottom-right"):b?t(c,!0)?void showToast("error","<p>Your payment exceeds to amount due.</p>","<h3>WARNING!</h3>","toast-bottom-right"):($("#op_credit_table").append("<tr><td>"+a+"</td><td>"+c+"</td><td>"+b+"</td><td><span  class='glyphicon glyphicon-remove-sign removeItem'></span></td></tr>"),$("#op_billing_cardnumber").val(""),$("#op_billing_bankname").val(""),$("#op_billing_amount").val(""),void E()):void showToast("error","<p>Please indicate bank name</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate amount</p>","<h3>WARNING!</h3>","toast-bottom-right")}),$("#op_addbanktransfer").click(function(){var a=$("#op_bankfrom_account_number").val(),b=$("#op_bankfrom_name").val(),c=$("#op_bt_amount").val();return a?c?isNaN(c)?void showToast("error","<p>Please indicate a valid amount</p>","<h3>WARNING!</h3>","toast-bottom-right"):parseFloat(c)<1?void showToast("error","<p>Amount should be greater than Zero</p>","<h3>WARNING!</h3>","toast-bottom-right"):b?t(c,!0)?void showToast("error","<p>Your payment exceeds to amount due.</p>","<h3>WARNING!</h3>","toast-bottom-right"):($("#op_bt_table").append("<tr><td>"+a+"</td><td>"+c+"</td><td>"+b+"</td><td><span  class='glyphicon glyphicon-remove-sign removeItem'></span></td></tr>"),$("#op_bankfrom_account_number").val(""),$("#op_bankfrom_name").val(""),$("#op_bt_amount").val(""),void F()):void showToast("error","<p>Please indicate bank name</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate amount</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate card number</p>","<h3>WARNING!</h3>","toast-bottom-right")}),$("#op_addcheque").click(function(){var a=$("#op_ch_date").val(),b=$("#op_ch_number").val(),c=$("#op_ch_amount").val(),d=$("#op_ch_bankname").val();return a?b?c?y(a)?isNaN(c)?void showToast("error","<p>Please indicate a valid amount</p>","<h3>WARNING!</h3>","toast-bottom-right"):parseFloat(c)<1?void showToast("error","<p>Amount should be greater than Zero</p>","<h3>WARNING!</h3>","toast-bottom-right"):d?t(c,!0)?void showToast("error","<p>Your payment exceeds to amount due.</p>","<h3>WARNING!</h3>","toast-bottom-right"):($("#op_ch_table").append("<tr><td>"+a+"</td><td>"+b+"</td><td>"+c+"</td><td>"+d+"</td><td><span  class='glyphicon glyphicon-remove-sign removeItem'></span></td></tr>"),$("#op_ch_date").val(""),$("#op_ch_number").val(""),$("#op_ch_amount").val(""),$("#op_ch_bankname").val(""),void G()):void showToast("error","<p>Please indicate bank name</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Invalid Date Format. It should be mm/dd/yyyy (Ex. 01/01/2014) </p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate amount</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate card number</p>","<h3>WARNING!</h3>","toast-bottom-right"):void showToast("error","<p>Please indicate date</p>","<h3>WARNING!</h3>","toast-bottom-right")}),$(".op_cashreceivecancel").click(function(){$("#modalOverPayment").modal("hide"),$("#op_credit_table").find("tr").remove(),$("#op_bt_table").find("tr").remove(),$("#op_ch_table").find("tr").remove(),$("#over_payment_a :input[type='text']").val(""),$("#over_payment_b :input[type='text']").val(""),$("#over_payment_c :input[type='text']").val(""),$("#over_payment_d :input[type='text']").val(""),localStorage.removeItem("payment_cheque"),localStorage.removeItem("payment_credit"),localStorage.removeItem("payment_bt"),localStorage.removeItem("payment_cash"),localStorage.removeItem("payment_con"),localStorage.removeItem("payment_con_freebies"),localStorage.removeItem("payment_member_credit"),localStorage.removeItem("payment_member_deduction"),localStorage.removeItem("op_payment_cheque"),localStorage.removeItem("op_payment_credit"),localStorage.removeItem("op_payment_bt"),localStorage.removeItem("op_payment_cash")}),$("body").on("click",".op_cashreceiveok",function(){K()})}(vm);